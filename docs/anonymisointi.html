<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="fi" xml:lang="fi"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Nollatoleranssi-hankkeen liitesivusto - 18&nbsp; Anonymisointi</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./koodikirja.html" rel="next">
<link href="./puhdistaminen.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "Ei tuloksia",
    "search-matching-documents-text": "tulokset",
    "search-copy-link-title": "Kopioi linkki hakuun",
    "search-hide-matches-text": "Piilota loput tulokset",
    "search-more-match-text": "tulos tässä dokumentissa",
    "search-more-matches-text": "tulosta tässä dokumentissa",
    "search-clear-button-title": "Tyhjennä",
    "search-detached-cancel-button-title": "Peruuta",
    "search-submit-button-title": "Lähetä",
    "search-label": "Hae"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-sidebar docked nav-fixed slimcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Nollatoleranssi-hankkeen liitesivusto</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Hae"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Vaihda navigointi" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html" rel="" target="">
 <span class="menu-text">Etusivu</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-kirjallisuuskatsaus" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Kirjallisuuskatsaus</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-kirjallisuuskatsaus">    
        <li>
    <a class="dropdown-item" href="./kriteeristo.html" rel="" target="">
 <span class="dropdown-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Kriteeristö</span></span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./seulontamenetelma.html" rel="" target="">
 <span class="dropdown-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Seulontamenetelmä</span></span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./hakuprosessi.html" rel="" target="">
 <span class="dropdown-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Hakuprosessi ja PRISMA-kaavio</span></span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./yleiskuvailu.html" rel="" target="">
 <span class="dropdown-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Tulosten yleiskuvaus</span></span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./katsausartikkeli.html" rel="" target="">
 <span class="dropdown-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Katsausartikkeli</span></span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-katsauksen-osahaut" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Katsauksen osahaut</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-katsauksen-osahaut">    
        <li>
    <a class="dropdown-item" href="./haku1.html" rel="" target="">
 <span class="dropdown-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Haku 1</span></span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./haku2.html" rel="" target="">
 <span class="dropdown-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Haku 2</span></span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./haku3.html" rel="" target="">
 <span class="dropdown-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Haku 3</span></span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./haku4.html" rel="" target="">
 <span class="dropdown-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Haku 4</span></span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./haku5.html" rel="" target="">
 <span class="dropdown-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Haku 5</span></span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./haku6.html" rel="" target="">
 <span class="dropdown-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Haku 6</span></span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-kyselyprosessi" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Kyselyprosessi</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-kyselyprosessi">    
        <li>
    <a class="dropdown-item" href="./kyselynvalmistelu.html" rel="" target="">
 <span class="dropdown-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Kyselyn valmistelu</span></span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./tiedonkeruu.html" rel="" target="">
 <span class="dropdown-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Tiedonkeruu</span></span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./eksportointi.html" rel="" target="">
 <span class="dropdown-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Eksportointi</span></span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./nimeaminen.html" rel="" target="">
 <span class="dropdown-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Nimeäminen</span></span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./valmistelu.html" rel="" target="">
 <span class="dropdown-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Valmistelu</span></span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./puhdistaminen.html" rel="" target="">
 <span class="dropdown-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Puhdistaminen</span></span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./anonymisointi.html" rel="" target="">
 <span class="dropdown-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Anonymisointi</span></span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./koodikirja.html" rel="" target="">
 <span class="dropdown-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Koodikirjan rakentaminen</span></span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./datatarkistus.html" rel="" target="">
 <span class="dropdown-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Datatarkistus</span></span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-frekvenssitulokset" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Frekvenssitulokset</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-frekvenssitulokset">    
        <li>
    <a class="dropdown-item" href="./metatiedot.html" rel="" target="">
 <span class="dropdown-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Kyselyn metatiedot</span></span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./taustamuuttujat.html" rel="" target="">
 <span class="dropdown-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Taustamuuttujat</span></span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./esiintyvyys.html" rel="" target="">
 <span class="dropdown-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Epäasiallisen ja väkivaltaisen kohtelun esiintyvyys</span></span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./vaikutukset.html" rel="" target="">
 <span class="dropdown-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Koetun kohtelun vaikutukset</span></span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./ilmoitusjarjestelmat.html" rel="" target="">
 <span class="dropdown-text"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Ilmoitusjärjestelmät</span></span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./organisaatiotoimet.html" rel="" target="">
 <span class="dropdown-text"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Organisaatiotoimet</span></span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-tilastolliset-mallit" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Tilastolliset mallit</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-tilastolliset-mallit">    
        <li>
    <a class="dropdown-item" href="./ryhmavertailut.html" rel="" target="">
 <span class="dropdown-text"><span class="chapter-number">27</span>&nbsp; <span class="chapter-title">Ryhmävertailut</span></span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./korrelaatiosuhteet.html" rel="" target="">
 <span class="dropdown-text"><span class="chapter-number">28</span>&nbsp; <span class="chapter-title">Korrelaatiosuhteet</span></span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./kohtelu_validointi.html" rel="" target="">
 <span class="dropdown-text"><span class="chapter-number">29</span>&nbsp; <span class="chapter-title">Epäasiallisen ja väkivaltaisen kohtelun esiintyvyyden mittarin validointi</span></span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./ilmoasenteet_validointi.html" rel="" target="">
 <span class="dropdown-text"><span class="chapter-number">30</span>&nbsp; <span class="chapter-title">Ilmoitusjärjestelmäasenteiden verkostoanalyysi</span></span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./muutosaie_sem.html" rel="" target="">
 <span class="dropdown-text"><span class="chapter-number">31</span>&nbsp; <span class="chapter-title">Muutosaikeiden ennustaminen työuupumuksen ja kohtelun avulla</span></span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-esitykset-ja-kirjoitukset" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Esitykset ja kirjoitukset</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-esitykset-ja-kirjoitukset">    
        <li>
    <a class="dropdown-item" href="./deibseminaari.html" rel="" target="">
 <span class="dropdown-text"><span class="chapter-number">32</span>&nbsp; <span class="chapter-title">Pelastusalan DEIB-seminaari</span></span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./blogi1.html" rel="" target="">
 <span class="dropdown-text"><span class="chapter-number">33</span>&nbsp; <span class="chapter-title">Blogi: Epäasiallisuutta ja väkivaltaa esiintyy pelastusalalla ja ensihoidossa laajasti</span></span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./blogi2.html" rel="" target="">
 <span class="dropdown-text"><span class="chapter-number">34</span>&nbsp; <span class="chapter-title">Blogi: Työyhteisön epäasiallisuudet ja väkivalta heikentävät alan pitovoimaa</span></span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./blogi3.html" rel="" target="">
 <span class="dropdown-text"><span class="chapter-number">35</span>&nbsp; <span class="chapter-title">Blogi: Epäasiallisuuksia ja väkivaltaa ei raportoida, jos ilmoitusjärjestelmää ei ole olemassa</span></span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./blogi4.html" rel="" target="">
 <span class="dropdown-text"><span class="chapter-number">36</span>&nbsp; <span class="chapter-title">Blogi: Tasa-arvoon ja yhdenvertaisuuteen tähtäävät toimenpiteet purevat osittain</span></span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="./lahteet.html" rel="" target="">
 <span class="menu-text">Lähteet</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools ms-auto">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Vaihda sivupalkki" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./anonymisointi.html"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Anonymisointi</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Vaihda sivupalkki" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation docked overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./kyselynvalmistelu.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Kyselyn valmistelu</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tiedonkeruu.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Tiedonkeruu</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./eksportointi.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Eksportointi</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./nimeaminen.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Nimeäminen</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./valmistelu.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Valmistelu</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./puhdistaminen.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Puhdistaminen</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./anonymisointi.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Anonymisointi</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./koodikirja.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Koodikirjan rakentaminen</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./datatarkistus.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Datatarkistus</span></span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Sisällysluettelo</h2>
   
  <ul>
  <li><a href="#sec-anonymisointi-jarjestys" id="toc-sec-anonymisointi-jarjestys" class="nav-link active" data-scroll-target="#sec-anonymisointi-jarjestys"><span class="header-section-number">18.1</span> Anonymisoinnin järjestys</a></li>
  <li><a href="#sec-anonymisointi-kohta1" id="toc-sec-anonymisointi-kohta1" class="nav-link" data-scroll-target="#sec-anonymisointi-kohta1"><span class="header-section-number">18.2</span> Kohta 1: Taustamuuttujien anonymisointi</a></li>
  <li><a href="#sec-anonymisointi-kohta2" id="toc-sec-anonymisointi-kohta2" class="nav-link" data-scroll-target="#sec-anonymisointi-kohta2"><span class="header-section-number">18.3</span> Kohta 2: Harvinaisten ilmiöiden anonymisointi</a></li>
  <li><a href="#sec-anonymisointi-kohta3" id="toc-sec-anonymisointi-kohta3" class="nav-link" data-scroll-target="#sec-anonymisointi-kohta3"><span class="header-section-number">18.4</span> Kohta 3: Taustamuuttujien k-anonymisointi toisiaan vastaan</a></li>
  <li><a href="#sec-anonymisointi-kooste" id="toc-sec-anonymisointi-kooste" class="nav-link" data-scroll-target="#sec-anonymisointi-kooste"><span class="header-section-number">18.5</span> Kooste muutoksista</a></li>
  <li><a href="#sec-anonymisointi-datantallennus" id="toc-sec-anonymisointi-datantallennus" class="nav-link" data-scroll-target="#sec-anonymisointi-datantallennus"><span class="header-section-number">18.6</span> Datan tallennus</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title"><span id="sec-anonymisointi" class="quarto-section-identifier"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Anonymisointi</span></span></h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Koodi</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Näytä kaikki koodi</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Piilota kaikki koodi</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">Näytä lähdekoodi</a></li></ul></div></div>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>Tutkimus anonymisoitiin anonymisointisuunnitelman mukaisesti.</p>
<p>Osiossa käytetty aineisto ei ole saatavilla tietosuojan takia.</p>
<div class="cell">
<details>
<summary>Osiossa käytetyt paketit ja aineiston avaaminen</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse) <span class="co"># Datakäsittely</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">read.csv2</span>(<span class="st">"output/puhdistettudata.csv"</span>)</span></code><button title="Kopioi leikepöydälle" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Osiossa käytettyjen funktioiden määrittely</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Projektipäällikön kirjoittama funktio k-anonymiteetin tarkistamiseksi.</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Funktio vaatii paketit checkmate, cli, dplyr ja rlang.</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>k_anonymity <span class="ot">&lt;-</span> <span class="cf">function</span>(data, limit, ...) {</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Argument checks</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span>(checkmate<span class="sc">::</span><span class="fu">check_data_frame</span>(data) <span class="sc">||</span> checkmate<span class="sc">::</span><span class="fu">check_tibble</span>(data))) {</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>    cli<span class="sc">::</span><span class="fu">cli_abort</span>(<span class="fu">c</span>(</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>      <span class="st">"{.var data} must be a data frame or tibble"</span>,</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>      <span class="st">"x"</span> <span class="ot">=</span> <span class="st">"You supplied the type {.cls class(data)}"</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>    ))</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span>(checkmate<span class="sc">::</span><span class="fu">check_int</span>(limit))) {</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>    cli<span class="sc">::</span><span class="fu">cli_abort</span>(<span class="fu">c</span>(</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>      <span class="st">"{.var limit} must be a single integer"</span>,</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>      <span class="st">"x"</span> <span class="ot">=</span> <span class="st">"You supplied the type {.cls class(limit)}"</span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>    ))</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Select data according to variables</span></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>  cols <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">quos</span>(...)</span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Capture error from incorrect cols and return more helpful error message</span></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>  selected_data <span class="ot">&lt;-</span> rlang<span class="sc">::</span><span class="fu">try_fetch</span>(</span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>    data <span class="sc">|&gt;</span> dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">!!!</span>cols),</span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">error =</span> <span class="cf">function</span>(cnd) {</span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>      cli<span class="sc">::</span><span class="fu">cli_abort</span>(<span class="fu">c</span>(</span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>        <span class="st">"All supplied columns must exist in {.var data}"</span>,</span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a>        <span class="st">"X"</span> <span class="ot">=</span> <span class="st">"You supplied the column names {sapply(cols, rlang::f_text)}"</span>,</span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a>        <span class="st">"i"</span> <span class="ot">=</span> <span class="st">"{.var data} contains the columns {names(data)}"</span>,</span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a>        <span class="st">"i"</span> <span class="ot">=</span> <span class="st">"Tip: Negated columns must also exist in the data"</span></span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a>      ),</span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a>      <span class="at">parent =</span> cnd)</span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Crosstabulate and retrieve all unique combinations that fall below the limit</span></span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a>  low_count_cells <span class="ot">&lt;-</span> <span class="fu">table</span>(selected_data, <span class="at">useNA =</span> <span class="st">"always"</span>) <span class="sc">|&gt;</span></span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as.data.frame</span>() <span class="sc">|&gt;</span></span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">filter</span>(Freq <span class="sc">&lt;</span> limit)</span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Exit early if no cells fall below the threshold</span></span>
<span id="cb2-42"><a href="#cb2-42" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">length</span>(low_count_cells) <span class="sc">==</span> <span class="dv">0</span>) {</span>
<span id="cb2-43"><a href="#cb2-43" aria-hidden="true" tabindex="-1"></a>    <span class="fu">message</span>(<span class="st">"All variable combinations are at or above the supplied threshold"</span>)</span>
<span id="cb2-44"><a href="#cb2-44" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="cn">NULL</span>)</span>
<span id="cb2-45"><a href="#cb2-45" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb2-46"><a href="#cb2-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-47"><a href="#cb2-47" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(low_count_cells)</span>
<span id="cb2-48"><a href="#cb2-48" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Kopioi leikepöydälle" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<section id="sec-anonymisointi-jarjestys" class="level2 page-columns page-full" data-number="18.1">
<h2 data-number="18.1" class="anchored" data-anchor-id="sec-anonymisointi-jarjestys"><span class="header-section-number">18.1</span> Anonymisoinnin järjestys</h2>
<ol type="1">
<li>Tarkistetaan taustamuuttujien kategoriat harvinaisten vastausten osalta yksitellen, ja yhdistetään kategorioita tarpeen mukaan.</li>
<li>Tarkistetaan harvinaisten ilmiöiden muuttujien kategoriat harvinaisten vastausten osalta yksitellen, ja yhdistetään tai poistetaan kategorioita/muuttujia tarpeen mukaan.</li>
<li>Taustamuuttujat 4-anonymisoidaan kolmen muuttujan yhdistelmissä, ja yhdistetään kategorioita tarpeen mukaan<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>.</li>
</ol>
<div class="no-row-height column-margin column-container"><li id="fn1"><p><sup>1</sup>&nbsp;Alkuperäisessä suunnitelmassa tarkoituksena oli 5-anonymisoida muuttujat kahden ja kolmen muuttujan yhdistelmissä. Tarkastaessamme anonymisointia huomasimme kuitenkin, ettei 5-anonymiteettiä voitu toteuttaa ilman laajoja kategoriayhdistämisiä. Tämä olisi vähentänyt datan jatkokäytettävyyttä liikaa. Laskemalla k-arvon neljään pystyimme suorittamaan anonymisoinnin sopivalla määrällä kategoriayhdistelmiä, jotta jatkokäytettävyys säilyy. Jätimme myös pois kahden muuttujan tarkistuksen, sillä kolmen muuttujan tarkistus varmisti kahden muuttujan välisen anonymiteetin.</p></li></div><p>Näiden lisäksi luokittelimme muuttujan <code>k43</code> avovastaukset luokkiin aikaisemmin (ks. <a href="valmistelu.html#sec-valmistelu-avovastaukset"><span>Alaluku&nbsp;16.5</span></a>). Näiden anonymiteetti oli taattu luokitteluprosessissa.</p>
<p><strong>Kohta 1: Käsiteltävät taustamuuttujat:</strong></p>
<ol type="1">
<li>Organisaatiokuuluvuus (<code>k2</code>, neljä kategoriaa)
<ol type="1">
<li>Kaikilla vastaajilla tulee olla yksi arvo.</li>
<li>Määräsääntö: <code>n &gt; 5</code></li>
<li>Yhdistetään luokat <code>1</code> ja <code>2</code> sekä <code>3</code> ja <code>4</code> tarpeen vaatiessa.</li>
</ol></li>
<li>Sukupuoli (<code>k31</code>, neljä kategoriaa)
<ol type="1">
<li>Kaikilla vastaajilla tulee olla yksi arvo.</li>
<li>Määräsääntö: <code>n &gt; 30</code></li>
<li>Yhdistetään luokat <code>1</code>, <code>3</code> ja <code>4</code> pienimpään toiseen luokkaan, joka täyttää määräsäännön.</li>
</ol></li>
<li>Työrytmi (<code>k32-k35</code>, <code>k37</code>)
<ol type="1">
<li>Kaikilla vastaajilla tulee olla yksi arvo, organisaatiokuuluvuudensa mukaisesti.</li>
<li>Määräsääntö: <code>n &gt; 10</code></li>
<li>Muuttuja <code>k32</code>: Yhdistetään samanaiheiseen kategoriaan tarpeen vaatiessa.</li>
<li>Muuttuja <code>k33</code>: Yhdistetään viereiseen kategoriaan tarpeen vaatiessa.</li>
<li>Muuttuja <code>k34</code>: Ei muutoksia.</li>
<li>Muuttuja <code>k35</code>: Yhdistetään viereiseen kategoriaan tarpeen vaatiessa.</li>
<li>Muuttuja <code>k37</code>: Yhdistetään samanaiheiseen kategoriaan tarpeen vaatiessa.</li>
</ol></li>
<li>Organisaatioasema (<code>Organisaatioasema</code>, kuusi kategoriaa)
<ol type="1">
<li>Kaikilla vastaajilla tulee olla yksi arvo.</li>
<li>Rakennetaan eri organisaatioasemamuuttujista (<a href="valmistelu.html#sec-valmistelu-uudelleenkoodaukset-organisaatioasema"><span>Alaluku&nbsp;16.4.1</span></a>)</li>
<li>Määräsääntö: <code>n &gt; 10</code></li>
<li>Yhdistetään luokat <code>1</code> ja <code>4</code> tarpeen vaatiessa.</li>
<li>Muut luokat yhdistetään aiheittain tarpeen vaatiessa.</li>
</ol></li>
<li>Työuran pituus (<code>k41</code>): Viiden fraktiilin luokitus
<ol type="1">
<li>Kaikilla vastaajilla tulee olla yksi arvo.</li>
<li>Luokitellaan viiteen fraktiiliin, mikä riittää yksimuuttuja-anonymisoinnille.</li>
</ol></li>
</ol>
<p><strong>Kohta 2: Harvinaisten ilmiöiden muuttujat:</strong></p>
<ol type="1">
<li>Epäasiallisen ja väkivaltaisen kohtelun yleisyys (<code>k3_1:k4_7</code>, <code>k12_1:k13_7</code>)
<ol type="1">
<li>Yhteensä 28 muuttujaa</li>
<li>Kaikilla vastaajilla tulee olla yksi arvo, mikä voi myös olla arvo <code>NA</code></li>
<li>Sovelletaan 5-anonymiteettia (ks. kohta 4)</li>
</ol></li>
<li>Kohtelun selventävät mittarit (<code>k5_3_1:k5_3_2</code>, <code>k7_10_1:k7_10_2</code>, <code>k8_11_1:k8_11_2</code>, <code>k9_5_1:k9_5_2</code>, <code>k9_10_1:k9_10_2</code>, <code>k10_2_1:k10_2_2</code>, <code>k10_10_1:k10_10_2</code>, <code>k10_11_1:k10_11_2</code>, <code>k11_6_1:k11_6_2</code>, <code>k14_3_1:k14_3_2</code>, <code>k16_10_1:k16_10_2</code>, <code>k17_11_1:k17_11_2</code>, <code>k18_5_1:k18_5_2</code>, <code>k18_10_1:k18_10_2</code>, <code>k19_2_1:k19_2_2</code>, <code>k19_10_1:k19_10_2</code>, <code>k19_11_1:k19_11_2</code>)
<ol type="1">
<li>Yhteensä 34 muuttujaa</li>
<li>Kaikilla vastaajilla tulee olla yksi arvo, mikä voi myös olla arvo <code>NA</code> tai <code>-1</code></li>
<li>Määräsääntö: <code>n &gt; 5</code></li>
<li>Muuttuja poistetaan jos määräsääntö ei täyty jokaisen kategorian osalta (<code>NA</code>, <code>-1</code>, <code>1</code>)</li>
</ol></li>
<li>Vaikutukset jatkuvat yhä (<code>k22_1_1:k22_3_1</code>)
<ol type="1">
<li>Yhteensä 3 muuttujaa</li>
<li>Kaikilla vastaajilla tulee olla yksi arvo, mikä voi myös olla arvo <code>NA</code> tai <code>-1</code></li>
<li>Sovelletaan 5-anonymiteettia (ks. kohta 4)</li>
</ol></li>
<li>Reaktiot kohteluun (<code>k23_1:k23_11</code>)
<ol type="1">
<li>Yhteensä 11 muuttujaa</li>
<li>Kaikilla vastaajilla tulee olla yksi arvo, mikä voi myös olla arvo <code>NA</code> tai <code>-1</code></li>
<li>Sovelletaan 5-anonymiteettia (ks. kohta 4)</li>
</ol></li>
</ol>
<p><strong>Kohta 3: Taustamuuttujien 4-anonymisointi ristiintaulukoimalla</strong></p>
<ol type="1">
<li>Organisaatiokuuluvuus x Organisaatioasema x Sukupuoli (<code>k2 * Organisaatioasema * k31</code>)</li>
<li>Organisaatiokuuluvuus x Organisaatioasema x Työrytmi (<code>k2 * Organisaatioasema * k32, k33, k34, k35, k37</code>)</li>
<li>Organisaatiokuuluvuus x Organisaatioasema x Työuran pituus (<code>k2 * Organisaatioasema * k41</code>)</li>
</ol>
<p>Kaikilla taustamuuttujilla seurattiin seuraavaa prioriteettijärjestystä muutoksissa:</p>
<ol type="1">
<li>Organisaatioaseman (<code>Organisaatioasema</code>) kategoriat yhdistetään vähintään neljäksi kategoriaksi.</li>
<li>Työrytmin (<code>k32, k33, k34, k35, k37</code>) kategoriat yhdistetään vähintään kolmeksi kategoriaksi.
<ol type="1">
<li>Poikkeuksena <code>k34</code>, jolle ei voida tehdä muutoksia.</li>
</ol></li>
<li>Työuran pituuden (<code>k41</code>) fraktiileja vähennetään vähintään kolmeen fraktiiliin.</li>
<li>Sukupuolen (<code>k31</code>) kategoriat yhdistetään vähintään kahteen kategoriaan.</li>
<li>Organisaatiokuuluvuuden (<code>k2</code>) kategoriat yhdistetään vähintään kolmeen kategoriaan.</li>
</ol>
</section>
<section id="sec-anonymisointi-kohta1" class="level2" data-number="18.2">
<h2 data-number="18.2" class="anchored" data-anchor-id="sec-anonymisointi-kohta1"><span class="header-section-number">18.2</span> Kohta 1: Taustamuuttujien anonymisointi</h2>
<div class="cell">
<details>
<summary>Taustamuuttujien k-tarkastus</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">k_anonymity</span>(data, <span class="at">limit =</span> <span class="dv">5</span>, k2)</span></code><button title="Kopioi leikepöydälle" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>    k2 Freq
1 &lt;NA&gt;    0</code></pre>
</div>
<details>
<summary>Taustamuuttujien k-tarkastus</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">k_anonymity</span>(data, <span class="at">limit =</span> <span class="dv">30</span>, k31)</span></code><button title="Kopioi leikepöydälle" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>   k31 Freq
1    3    7
2 &lt;NA&gt;    0</code></pre>
</div>
<details>
<summary>Taustamuuttujien k-tarkastus</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">k_anonymity</span>(data, <span class="at">limit =</span> <span class="dv">10</span>, k32)</span></code><button title="Kopioi leikepöydälle" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>   k32 Freq
1    4    2
2 &lt;NA&gt;    0</code></pre>
</div>
<details>
<summary>Taustamuuttujien k-tarkastus</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">k_anonymity</span>(data, <span class="at">limit =</span> <span class="dv">10</span>, k33)</span></code><button title="Kopioi leikepöydälle" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>   k33 Freq
1    5    8
2 &lt;NA&gt;    0</code></pre>
</div>
<details>
<summary>Taustamuuttujien k-tarkastus</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">k_anonymity</span>(data, <span class="at">limit =</span> <span class="dv">10</span>, k34)</span></code><button title="Kopioi leikepöydälle" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>   k34 Freq
1 &lt;NA&gt;    0</code></pre>
</div>
<details>
<summary>Taustamuuttujien k-tarkastus</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">k_anonymity</span>(data, <span class="at">limit =</span> <span class="dv">10</span>, k35)</span></code><button title="Kopioi leikepöydälle" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>   k35 Freq
1    5    7
2 &lt;NA&gt;    0</code></pre>
</div>
<details>
<summary>Taustamuuttujien k-tarkastus</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">k_anonymity</span>(data, <span class="at">limit =</span> <span class="dv">10</span>, k37)</span></code><button title="Kopioi leikepöydälle" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>   k37 Freq
1 &lt;NA&gt;    0</code></pre>
</div>
<details>
<summary>Taustamuuttujien k-tarkastus</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">k_anonymity</span>(data, <span class="at">limit =</span> <span class="dv">10</span>, Organisaatioasema)</span></code><button title="Kopioi leikepöydälle" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>  Organisaatioasema Freq
1              &lt;NA&gt;    0</code></pre>
</div>
</div>
<p>Organisaatiokuuluvuusmuuttujalla (<code>k2</code>) ei ollut yhtään ongelmallista kategoriaa.</p>
<p>Sukupuolimuuttujalla (<code>k31</code>) oli yksi ongelmallinen kategoria: muunsukupuolisia (<code>k31 == 3</code>) oli seitsemän vastaajaa. Seuraavaksi pienin ryhmä oli vastaamisesta kieltäytyneet (<code>k31 == 4</code>, yhteensä 31 vastaajaa).</p>
<p>Pelastuslaitoksen tai ensihoidon työrytmimuuttujalla (<code>k32</code>) oli yksi ongelmallinen kategoria: työ- tai virkavapaalla olevia (<code>k32 == 4</code>) oli yhteensä kaksi kappaletta. Seuraavaksi pienin ryhmä oli kahdentoista tunnin työvuorot (<code>k32 == 2</code>, yhteensä 328 vastaajaa).</p>
<p>Sopimuspalokuntien ja palokuntayhdistysten viikottaisen työmääräarvion muuttujalla (<code>k33</code>) oli yksi ongelmallinen kategoria: yli 21 tuntia viikossa tekeviä (<code>k33 == 5</code>) oli yhteensä 7 henkilöä.</p>
<p>Sopimuspalokuntien ja palokuntayhdistysten varallaolomuuttujalla (<code>k34</code>) ei ollut yhtään ongelmallista kategoriaa.</p>
<p>Sopimuspalokuntien ja palokuntayhdistysten varallaolon kuukausittaisen työmääräarvion muuttujalla (<code>k35</code>) oli yksi ongelmallinen kategoria: yli 200 tuntia tekeviä (<code>k35 == 5</code>) oli yhteensä 7 vastaajaa.</p>
<p>Järjestöjen ja koulutusorganisaatioiden työrytmimuuttujalla (<code>k37</code>) ei ollut yhtään ongelmallista kategoriaa.</p>
<p>Rakennetulla organisaatioasemamuuttujalla (<code>Organisaatioasema</code>) ei ollut yhtään ongelmallista kategoriaa.</p>
<p>Teimme seuraavat muutokset:</p>
<ul>
<li>Sukupuoli (<code>k31</code>): Muunsukupuoliset yhdistettiin vastaamisesta kieltäytyneisiin uudeksi koodiksi <code>3</code>. Täten koodia <code>4</code> ei enää esiinny, ja uudet koodivaihtoehdot olivat:
<ul>
<li><code>1</code> (Mies)</li>
<li><code>2</code> (Nainen)</li>
<li><code>3</code> (Muu tai ei halua vastata)</li>
</ul></li>
<li>Pelastuslaitoksen tai ensihoidon työrytmi (<code>k32</code>): Työ- tai virkavapaaalla olevat yhdistettiin virasto- tai toimistotyöaikaan (<code>3</code>). Täten koodia <code>4</code> ei enää esiinny, ja uudet koodivaihtoehdot olivat:
<ul>
<li><code>-1</code> (ei esitetty)</li>
<li><code>1</code> (24h työvuorot)</li>
<li><code>2</code> (12h työvuorot)</li>
<li><code>3</code> (Virasto- tai toimistotyöaika, työ- tai virkavapaalla)</li>
</ul></li>
<li>Sopimuspalokuntien ja palokuntayhdistysten viikottainen työmääräarvio (<code>k33</code>): Yli 21 tuntia tekevät (<code>5</code>) yhdistettiin viereiseen 11-20 tuntia viikossa tekeviin (<code>4</code>). Täten koodia <code>5</code> ei enää esiinny, ja uudet koodivaihtoehdot olivat:
<ul>
<li><code>-1</code> (ei esitetty)</li>
<li><code>1</code> (alle 2 tuntia viikossa)</li>
<li><code>2</code> (2-5 tuntia viikossa)</li>
<li><code>3</code> (6-10 tuntia viikossa)</li>
<li><code>4</code> (yli 10 tuntia viikossa)</li>
</ul></li>
<li>Sopimuspalokuntien ja palokuntayhdistysten varallaolon kuukausittainen työmääräarvio (<code>k35</code>): Yli 200 tuntia tekevät (<code>5</code>) yhdistettiin viereiseen 121-200 tuntia tekeviin (<code>4</code>). Täten koodia <code>5</code> ei enää esiinny, ja uudet koodivaihtoehdot olivat:
<ul>
<li><code>-1</code> (ei esitetty)</li>
<li><code>1</code> (en ollenkaan)</li>
<li><code>2</code> (1-60 tuntia)</li>
<li><code>3</code> (61-120 tuntia)</li>
<li><code>4</code> (yli 120 tuntia)</li>
</ul></li>
</ul>
<div class="cell">
<details>
<summary>Taustamuuttujien muutokset</summary>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Sukupuolen muutos (k31)</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">|&gt;</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>      k31,</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>      <span class="sc">~</span> <span class="fu">case_match</span>(</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>        .x,</span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>        <span class="dv">1</span> <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>        <span class="dv">2</span> <span class="sc">~</span> <span class="dv">2</span>,</span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>        <span class="dv">3</span> <span class="sc">~</span> <span class="dv">3</span>,</span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>        <span class="dv">4</span> <span class="sc">~</span> <span class="dv">3</span></span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Pelastuslaitoksen ja ensihoidon työrytmin muutos (k32)</span></span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">|&gt;</span></span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb19-19"><a href="#cb19-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(</span>
<span id="cb19-20"><a href="#cb19-20" aria-hidden="true" tabindex="-1"></a>      k32,</span>
<span id="cb19-21"><a href="#cb19-21" aria-hidden="true" tabindex="-1"></a>      <span class="sc">~</span> <span class="fu">case_match</span>(</span>
<span id="cb19-22"><a href="#cb19-22" aria-hidden="true" tabindex="-1"></a>        .x,</span>
<span id="cb19-23"><a href="#cb19-23" aria-hidden="true" tabindex="-1"></a>        <span class="dv">1</span> <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb19-24"><a href="#cb19-24" aria-hidden="true" tabindex="-1"></a>        <span class="dv">2</span> <span class="sc">~</span> <span class="dv">2</span>,</span>
<span id="cb19-25"><a href="#cb19-25" aria-hidden="true" tabindex="-1"></a>        <span class="dv">3</span> <span class="sc">~</span> <span class="dv">3</span>,</span>
<span id="cb19-26"><a href="#cb19-26" aria-hidden="true" tabindex="-1"></a>        <span class="dv">4</span> <span class="sc">~</span> <span class="dv">3</span>,</span>
<span id="cb19-27"><a href="#cb19-27" aria-hidden="true" tabindex="-1"></a>        <span class="sc">-</span><span class="dv">1</span> <span class="sc">~</span> <span class="sc">-</span><span class="dv">1</span></span>
<span id="cb19-28"><a href="#cb19-28" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb19-29"><a href="#cb19-29" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb19-30"><a href="#cb19-30" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb19-31"><a href="#cb19-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-32"><a href="#cb19-32" aria-hidden="true" tabindex="-1"></a><span class="co"># Sopimuspalokuntien ja palokuntayhdistysten viikottaisen työmääräarvion muutos (k33)</span></span>
<span id="cb19-33"><a href="#cb19-33" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">|&gt;</span></span>
<span id="cb19-34"><a href="#cb19-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb19-35"><a href="#cb19-35" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(</span>
<span id="cb19-36"><a href="#cb19-36" aria-hidden="true" tabindex="-1"></a>      k33,</span>
<span id="cb19-37"><a href="#cb19-37" aria-hidden="true" tabindex="-1"></a>      <span class="sc">~</span> <span class="fu">case_match</span>(</span>
<span id="cb19-38"><a href="#cb19-38" aria-hidden="true" tabindex="-1"></a>        .x,</span>
<span id="cb19-39"><a href="#cb19-39" aria-hidden="true" tabindex="-1"></a>        <span class="dv">1</span> <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb19-40"><a href="#cb19-40" aria-hidden="true" tabindex="-1"></a>        <span class="dv">2</span> <span class="sc">~</span> <span class="dv">2</span>,</span>
<span id="cb19-41"><a href="#cb19-41" aria-hidden="true" tabindex="-1"></a>        <span class="dv">3</span> <span class="sc">~</span> <span class="dv">3</span>,</span>
<span id="cb19-42"><a href="#cb19-42" aria-hidden="true" tabindex="-1"></a>        <span class="dv">4</span> <span class="sc">~</span> <span class="dv">4</span>,</span>
<span id="cb19-43"><a href="#cb19-43" aria-hidden="true" tabindex="-1"></a>        <span class="dv">5</span> <span class="sc">~</span> <span class="dv">4</span>,</span>
<span id="cb19-44"><a href="#cb19-44" aria-hidden="true" tabindex="-1"></a>        <span class="sc">-</span><span class="dv">1</span> <span class="sc">~</span> <span class="sc">-</span><span class="dv">1</span></span>
<span id="cb19-45"><a href="#cb19-45" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb19-46"><a href="#cb19-46" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb19-47"><a href="#cb19-47" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb19-48"><a href="#cb19-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-49"><a href="#cb19-49" aria-hidden="true" tabindex="-1"></a><span class="co"># Sopimuspalokuntien ja palokuntayhdistysten varallaolon kuukausittaisen työmääräarvion muutos (k35)</span></span>
<span id="cb19-50"><a href="#cb19-50" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">|&gt;</span></span>
<span id="cb19-51"><a href="#cb19-51" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb19-52"><a href="#cb19-52" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(</span>
<span id="cb19-53"><a href="#cb19-53" aria-hidden="true" tabindex="-1"></a>      k35,</span>
<span id="cb19-54"><a href="#cb19-54" aria-hidden="true" tabindex="-1"></a>      <span class="sc">~</span> <span class="fu">case_match</span>(</span>
<span id="cb19-55"><a href="#cb19-55" aria-hidden="true" tabindex="-1"></a>        .x,</span>
<span id="cb19-56"><a href="#cb19-56" aria-hidden="true" tabindex="-1"></a>        <span class="dv">1</span> <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb19-57"><a href="#cb19-57" aria-hidden="true" tabindex="-1"></a>        <span class="dv">2</span> <span class="sc">~</span> <span class="dv">2</span>,</span>
<span id="cb19-58"><a href="#cb19-58" aria-hidden="true" tabindex="-1"></a>        <span class="dv">3</span> <span class="sc">~</span> <span class="dv">3</span>,</span>
<span id="cb19-59"><a href="#cb19-59" aria-hidden="true" tabindex="-1"></a>        <span class="dv">4</span> <span class="sc">~</span> <span class="dv">4</span>,</span>
<span id="cb19-60"><a href="#cb19-60" aria-hidden="true" tabindex="-1"></a>        <span class="dv">5</span> <span class="sc">~</span> <span class="dv">4</span>,</span>
<span id="cb19-61"><a href="#cb19-61" aria-hidden="true" tabindex="-1"></a>        <span class="sc">-</span><span class="dv">1</span> <span class="sc">~</span> <span class="sc">-</span><span class="dv">1</span></span>
<span id="cb19-62"><a href="#cb19-62" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb19-63"><a href="#cb19-63" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb19-64"><a href="#cb19-64" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Kopioi leikepöydälle" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Näiden lisäksi luokittelimme työuran pituuden muuttujan (<code>k41</code>) ensin viiteen fraktiiliin. Myöhemmässä tarkastuksessa huomattiin, että fraktiilit piti vähentää neljään säilyttääksemme k-anonymiteetin. Muutos tehtiin takautuvasti tässä dokumentissa.</p>
<div class="cell">
<details>
<summary>Työuran pituuden fraktiililuokittelu</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>fraktiilit <span class="ot">&lt;-</span> <span class="fu">quantile</span>(</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  data<span class="sc">$</span>k41,</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">probs =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.25</span>, <span class="fl">0.5</span>, <span class="fl">0.75</span>, <span class="dv">1</span>)</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">|&gt;</span></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">k41 =</span> <span class="fu">cut</span>(</span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>      k41,</span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>      <span class="at">breaks =</span> <span class="fu">as.vector</span>(fraktiilit),</span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>      <span class="at">labels =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>),</span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>      <span class="at">include.lowest =</span> <span class="cn">TRUE</span></span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Kopioi leikepöydälle" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Fraktiilirajat ovat:</p>
<ul>
<li>0-25 %: 6 vuotta tai alle</li>
<li>25-50 %: 6 - 14 vuotta</li>
<li>50-75 %: 14 - 25 vuotta</li>
<li>75-100 %: 25 vuotta tai yli</li>
</ul>
</section>
<section id="sec-anonymisointi-kohta2" class="level2" data-number="18.3">
<h2 data-number="18.3" class="anchored" data-anchor-id="sec-anonymisointi-kohta2"><span class="header-section-number">18.3</span> Kohta 2: Harvinaisten ilmiöiden anonymisointi</h2>
<div class="cell">
<details>
<summary>Harvinaisten ilmiöiden k-tarkastus</summary>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Muuttujaa voi käyttää nyt ja myöhemmin looppaamiseen</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>muuttujat <span class="ot">&lt;-</span> rlang<span class="sc">::</span><span class="fu">exprs</span>(</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>  k3_1, k3_2, k3_3, k3_4, k3_5, k3_6, k3_7,</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>  k4_1, k4_2, k4_3, k4_4, k4_5, k4_6, k4_7,</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>  k12_1, k12_2, k12_3, k12_4, k12_5, k12_6, k12_7,</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>  k13_1, k13_2, k13_3, k13_4, k13_5, k13_6, k13_7,</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>  k5_3_1, k5_3_2,</span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>  k7_10_1, k7_10_2,</span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>  k8_11_1, k8_11_2,</span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>  k9_5_1, k9_5_2, k9_10_1, k9_10_2,</span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>  k10_2_1, k10_2_2, k10_10_1, k10_10_2, k10_11_1, k10_11_2,</span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a>  k11_6_1, k11_6_2,</span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a>  k14_3_1, k14_3_2,</span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a>  k16_10_1, k16_10_2,</span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a>  k17_11_1, k17_11_2,</span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a>  k18_5_1, k18_5_2, k18_10_1, k18_10_2,</span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a>  k19_2_1, k19_2_2, k19_10_1, k19_10_2, k19_11_1, k19_11_2,</span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a>  k22_1_1, k22_2_1, k22_3_1,</span>
<span id="cb21-19"><a href="#cb21-19" aria-hidden="true" tabindex="-1"></a>  k23_1, k23_2, k23_3, k23_4, k23_5, k23_6, k23_7, k23_8, k23_9, k23_10, k23_11</span>
<span id="cb21-20"><a href="#cb21-20" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb21-21"><a href="#cb21-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-22"><a href="#cb21-22" aria-hidden="true" tabindex="-1"></a><span class="co"># HUOM: Listaus sisältää muuttujaryhmät k3_1:k4_7, k12_1:k13_7, k22_1_1:k22_3_1 ja k23_1:k23_11. Näitä ei anonymisointisuunnitelman mukaisesti kuitenkaan tarkisteta.</span></span>
<span id="cb21-23"><a href="#cb21-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-24"><a href="#cb21-24" aria-hidden="true" tabindex="-1"></a>tulokset_kohta2 <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb21-25"><a href="#cb21-25" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> muuttujat) {</span>
<span id="cb21-26"><a href="#cb21-26" aria-hidden="true" tabindex="-1"></a>  tulokset_kohta2[[rlang<span class="sc">::</span><span class="fu">as_string</span>(i)]] <span class="ot">&lt;-</span> <span class="fu">k_anonymity</span>(data, <span class="at">limit =</span> <span class="dv">5</span>, i)</span>
<span id="cb21-27"><a href="#cb21-27" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb21-28"><a href="#cb21-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-29"><a href="#cb21-29" aria-hidden="true" tabindex="-1"></a><span class="co"># Poistetaan väliaikainen muuttuja siisteyden vuoksi</span></span>
<span id="cb21-30"><a href="#cb21-30" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(i)</span></code><button title="Kopioi leikepöydälle" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Tarkistettavista muuttujista seuraavilla esiintyi ongelmia:</p>
<ul>
<li><code>k7_10_1</code> (aseella tai voimankäyttövälineellä uhkaaminen, organisaation sisäinen, itse koettu): Vain neljä vastaajaa ovat kokeneet</li>
<li><code>k8_11_2</code> (voimankäyttövälineellä tai aseella vahingoittaminen, organisaation sisäinen, havaittu): Vain yksi vastaaja on havainnut</li>
<li><code>k9_5_1</code> (pakotettu seksuaalinen teko tai raiskaus, tai näiden yritys, organisaation sisäinen, itse koettu): Vain kolme vastaajaa ovat kokeneet</li>
<li><code>k18_5_1</code> (pakotettu seksuaalinen teko tai raiskaus, tai näiden yritys, organisaation ulkopuolinen, itse koettu): Vain kaksi vastaajaa ovat kokeneet</li>
<li><code>k18_5_2</code> (pakotettu seksuaalinen teko tai raiskaus, tai näiden yritys, organisaation ulkopuolinen, havaittu): Vain kaksi vastaajaa ovat havainneet</li>
</ul>
<p>Poistimme nämä muuttujat datatiedostosta kokonaan.</p>
<div class="cell">
<details>
<summary>Muuttujien poisto</summary>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">|&gt;</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">!</span><span class="fu">all_of</span>(<span class="fu">c</span>(<span class="st">"k7_10_1"</span>, <span class="st">"k8_11_2"</span>, <span class="st">"k9_5_1"</span>, <span class="st">"k18_5_1"</span>, <span class="st">"k18_5_2"</span>)))</span></code><button title="Kopioi leikepöydälle" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="sec-anonymisointi-kohta3" class="level2" data-number="18.4">
<h2 data-number="18.4" class="anchored" data-anchor-id="sec-anonymisointi-kohta3"><span class="header-section-number">18.4</span> Kohta 3: Taustamuuttujien k-anonymisointi toisiaan vastaan</h2>
<p>Tarkistimme taustamuuttujien 4-anonymiteetin ristiintaulukoimalla yllä mainitut muuttujayhdistelmät yksitellen ja viemällä tulokset Excel-taulukkoon. Taulukossa kokeilimme erilaisia kategoriayhdistämisiä tarkistaaksemme, millaisia vaikutuksia anonymiteetin täyttymiseen niillä olisi.</p>
<div class="cell">
<details>
<summary>Taustamuuttujien k-tarkastus toisiaan vastaan</summary>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">k_anonymity</span>(data, <span class="at">limit =</span> <span class="dv">5</span>, k2, Organisaatioasema, k32) <span class="sc">|&gt;</span> <span class="fu">filter</span>(Freq <span class="sc">!=</span> <span class="dv">0</span>)</span></code><button title="Kopioi leikepöydälle" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>  k2 Organisaatioasema k32 Freq
1  4                 1  -1    2
2  3                 4  -1    3
3  3                 6  -1    1
4  1                 3   1    4
5  1                 1   2    3
6  1                 3   2    1</code></pre>
</div>
<details>
<summary>Taustamuuttujien k-tarkastus toisiaan vastaan</summary>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">k_anonymity</span>(data, <span class="at">limit =</span> <span class="dv">5</span>, k2, Organisaatioasema, k33) <span class="sc">|&gt;</span> <span class="fu">filter</span>(Freq <span class="sc">!=</span> <span class="dv">0</span>)</span></code><button title="Kopioi leikepöydälle" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>  k2 Organisaatioasema k33 Freq
1  4                 1  -1    2
2  3                 4  -1    3
3  3                 6  -1    1
4  2                 4   2    4</code></pre>
</div>
<details>
<summary>Taustamuuttujien k-tarkastus toisiaan vastaan</summary>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">k_anonymity</span>(data, <span class="at">limit =</span> <span class="dv">5</span>, k2, Organisaatioasema, k34) <span class="sc">|&gt;</span> <span class="fu">filter</span>(Freq <span class="sc">!=</span> <span class="dv">0</span>)</span></code><button title="Kopioi leikepöydälle" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>  k2 Organisaatioasema k34 Freq
1  4                 1  -1    2
2  3                 4  -1    3
3  3                 6  -1    1</code></pre>
</div>
<details>
<summary>Taustamuuttujien k-tarkastus toisiaan vastaan</summary>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">k_anonymity</span>(data, <span class="at">limit =</span> <span class="dv">5</span>, k2, Organisaatioasema, k35) <span class="sc">|&gt;</span> <span class="fu">filter</span>(Freq <span class="sc">!=</span> <span class="dv">0</span>)</span></code><button title="Kopioi leikepöydälle" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>  k2 Organisaatioasema k35 Freq
1  4                 1  -1    2
2  3                 4  -1    3
3  3                 6  -1    1</code></pre>
</div>
<details>
<summary>Taustamuuttujien k-tarkastus toisiaan vastaan</summary>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">k_anonymity</span>(data, <span class="at">limit =</span> <span class="dv">5</span>, k2, Organisaatioasema, k37) <span class="sc">|&gt;</span> <span class="fu">filter</span>(Freq <span class="sc">!=</span> <span class="dv">0</span>)</span></code><button title="Kopioi leikepöydälle" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>  k2 Organisaatioasema k37 Freq
1  4                 1   1    2
2  3                 4   1    3
3  4                 4   1    4
4  3                 6   2    1
5  3                 1   3    4
6  3                 3   3    2
7  4                 4   3    1</code></pre>
</div>
<details>
<summary>Taustamuuttujien k-tarkastus toisiaan vastaan</summary>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">k_anonymity</span>(data, <span class="at">limit =</span> <span class="dv">5</span>, k2, Organisaatioasema, k41) <span class="sc">|&gt;</span> <span class="fu">filter</span>(Freq <span class="sc">!=</span> <span class="dv">0</span>)</span></code><button title="Kopioi leikepöydälle" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>   k2 Organisaatioasema k41 Freq
1   3                 1   1    1
2   2                 4   1    4
3   3                 4   1    1
4   4                 4   1    4
5   4                 5   1    1
6   3                 6   1    1
7   3                 1   2    2
8   3                 3   2    3
9   4                 3   2    1
10  1                 4   2    2
11  2                 4   2    1
12  3                 4   2    2
13  4                 5   2    2
14  3                 3   3    1
15  4                 3   3    2
16  1                 4   3    1
17  2                 4   3    2
18  4                 5   3    3
19  3                 1   4    4
20  4                 1   4    2
21  3                 3   4    3
22  4                 3   4    2
23  2                 4   4    4
24  4                 4   4    1
25  4                 5   4    4</code></pre>
</div>
<details>
<summary>Taustamuuttujien k-tarkastus toisiaan vastaan</summary>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">k_anonymity</span>(data, <span class="at">limit =</span> <span class="dv">5</span>, k2, Organisaatioasema, k31) <span class="sc">|&gt;</span> <span class="fu">filter</span>(Freq <span class="sc">!=</span> <span class="dv">0</span>)</span></code><button title="Kopioi leikepöydälle" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>   k2 Organisaatioasema k31 Freq
1   3                 1   1    4
2   4                 3   1    4
3   2                 4   1    3
4   3                 4   1    3
5   4                 5   1    2
6   4                 6   1    3
7   4                 1   2    2
8   3                 3   2    4
9   1                 4   2    3
10  3                 6   2    1
11  3                 1   3    1
12  2                 2   3    1
13  3                 3   3    2
14  4                 3   3    2
15  2                 4   3    1
16  4                 5   3    1</code></pre>
</div>
</div>
<p>Anonymiteettiä tarkastellessa emme ottaneet huomioon arvoa <code>-1</code>. Vastaaja on saanut tämän arvon, jos hänelle ei olla näytetty kysymystä; arvo määräytyy täydellisesti organisaatiokuuluvuudesta, jolloin siitä ei voida päätellä mitään uniikkia tietoa.</p>
<p>Sopimuspalokuntien ja palokuntayhdistysten työrytmimuuttujien kohdalla muutoksia ei tarvittu tehdä ollenkaan, sillä 4-anonymiteetin kriteerit täyttyivät valmiiksi.</p>
<p>Sukupuolen osalta totesimme, että arvoa <code>3</code> (muunsukupuolinen tai ei halua vastata) ei tarvita anonymisoida enempää, sillä arvosta ei enää voi päätellä, onko vastaajan sukupuoli muu kuin mies tai nainen, vai onko hän pidättäytynyt antamasta sukupuoltaan. Arvo ei siten sisällä pääteltävissä olevaa henkilötietoa.</p>
<p>Pelastuslaitosten ja ensihoidon työrytmimuuttujan (<code>k32</code>) osalta tunnistimme ongelmaksi johdon ja hallinnollisen henkilöstön 12-tuntisten päivien vastaajat.</p>
<p>Järjestöjen ja koulutusorganisaatioiden työrytmimuuttujan (<code>k37</code>) osalta tunnistimme yhden ongelman: hallinnollisen ja opetushenkilöstön työ- tai virkavapaalla olevat vastaajat.</p>
<p>Työuran pituuden (<code>k41</code>) tarkastelussa tunnistimme useita ongelmia. Useimmat ongelmat eivät korjaannu organisaatioaseman tai organisaatiokuuluvuuden yhdistämisellä. Vähentämällä fraktiileja neljään korjasimme useimmat ongelmat.</p>
<p>Korjataksemme useimmat ongelmat, päätimme tehdä seuraavat muutokset:</p>
<ul>
<li>Organisaatiokuuluvuudessa (<code>k2</code>) yhdistimme järjestöt ja koulutusorganisaatiot (<code>3</code> ja <code>4</code>) arvoksi <code>3</code>. Täten arvoa <code>4</code> ei enää ole, ja muuttujalla on kolme kategoriaa:
<ul>
<li><code>1</code> (Pelastuslaitokset ja ensihoito)</li>
<li><code>2</code> (Sopimuspalokunnat ja palokuntayhdistykset)</li>
<li><code>3</code> (Pelastusalan valtakunnalliset järjestöt, pelastusliitot sekä koulutusorganisaatiot).</li>
</ul></li>
<li>Organisaatioasemassa (<code>Organisaatioasema</code>) yhdistimme johto- ja esihenkilötason, asiantuntijatason sekä hallinnollisen ja tukipalveluhenkilöstötason (arvot <code>1</code>, <code>3</code> ja <code>4</code>) arvoksi <code>1</code>. Muutimme arvojen numerointia sopivammaksi, jolloin muuttujalla on neljä kategoriaa:
<ul>
<li><code>1</code> (Johto, asiantuntijat ja hallinto)</li>
<li><code>2</code> (Suorittava henkilöstö)</li>
<li><code>3</code> (Opetushenkilöstö)</li>
<li><code>4</code> (Opiskelija)</li>
</ul></li>
<li>Vähensimme työuran pituuden (<code>k41</code>) fraktiileja neljäksi. Muutos jouduttiin tekemään takautuvasti tässä dokumentissa, sillä aikaisempi data tuhottiin ensimmäisessä fraktiilimuutoksessa. Dokumentissa on huomio asiasta fraktiilikoodauksen kohdassa.</li>
</ul>
<p>Muutosehdotusten lisäksi jouduimme muuttamaan vastausarvoja neljälle vastaajalle, jotta heidän anonymiteettinsa voidaan taata:</p>
<ul>
<li>Yksi asiantuntija sopimuspalokunnista tai palokuntayhdistyksistä, joka työskentelee virasto- tai toimistotyöajalla muutettiin pelastuslaitoksen tai ensihoidon henkilöstöksi. Vaikka taustamuuttujista ei yksittäin luultavasti voitaisi tunnistaa vastaajaa, hänen muut vastauksensa voivat riittää yksilöimään hänet. Vastaanottavassa ryhmässä on yli 4 vastaajaa jokaisessa taustamuuttujatarkastuksessa, joten tunnistettavuuden riski laskee huomattavasti.</li>
<li>Kolme naispuolista opiskelijaa järjestöistä tai koulutusorganisaatioista muutettiin satunnaisesti joko miespuolisiksi tai muu-ryhmään. Kuten yllä, näiden vastaajien anonymiteetti olisi voinut rikkoutua muiden vastausten tarkistuksessa. Vastaanottavissa ryhmissä on yli 4 vastajaa jokaisessa taustamuuttujatarkastuksessa, joten tunnistettavuuden riski laskee niin ikään näille vastaajille huomattavasti.</li>
</ul>
<p>Emme näe, että kyselytutkimuksen myöhemmät tulokset vaikuttuvat suuresti näiden vastaajien datamuunnoksista. Anonymiteetin kannalta hyöty on tutkimuksellista haittaa nähden suurempi.</p>
<p>Tilastoteknisesti teimme neljän vastaajan datamuunnokset ensin ja kategorioiden yhdistämiset jälkeen.</p>
<div class="cell">
<details>
<summary>Tarkistuksen muutosten suorittaminen</summary>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Asiantuntija sopimuspalokunnista tai palokuntayhdistyksistä, joka työskentelee virasto- tai toimistotyöajalla muutetaan pelastuslaitoksen tai ensihoidon henkilöstöksi</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>k2 <span class="ot">&lt;-</span> <span class="fu">replace</span>(</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>  data<span class="sc">$</span>k2,</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>  data<span class="sc">$</span>ID <span class="sc">==</span> <span class="dv">260</span>,</span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>  <span class="dv">1</span></span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Naispuoliset opiskelijat järjestöistä tai koulutusorganisaatioista muutetaan satunnaisesti miespuolisiksi tai muu-ryhmään</span></span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>k31 <span class="ot">&lt;-</span> <span class="fu">replace</span>(</span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a>  data<span class="sc">$</span>k31,</span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a>  data<span class="sc">$</span>ID <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">181</span>, <span class="dv">182</span>, <span class="dv">187</span>),</span>
<span id="cb37-12"><a href="#cb37-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sample</span>(<span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">3</span>), <span class="dv">1</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span>
<span id="cb37-13"><a href="#cb37-13" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb37-14"><a href="#cb37-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-15"><a href="#cb37-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Organisaatiokuuluvuuden muutos</span></span>
<span id="cb37-16"><a href="#cb37-16" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">|&gt;</span></span>
<span id="cb37-17"><a href="#cb37-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb37-18"><a href="#cb37-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(</span>
<span id="cb37-19"><a href="#cb37-19" aria-hidden="true" tabindex="-1"></a>      k2,</span>
<span id="cb37-20"><a href="#cb37-20" aria-hidden="true" tabindex="-1"></a>      <span class="sc">~</span> <span class="fu">case_match</span>(</span>
<span id="cb37-21"><a href="#cb37-21" aria-hidden="true" tabindex="-1"></a>        .x,</span>
<span id="cb37-22"><a href="#cb37-22" aria-hidden="true" tabindex="-1"></a>        <span class="dv">1</span> <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb37-23"><a href="#cb37-23" aria-hidden="true" tabindex="-1"></a>        <span class="dv">2</span> <span class="sc">~</span> <span class="dv">2</span>,</span>
<span id="cb37-24"><a href="#cb37-24" aria-hidden="true" tabindex="-1"></a>        <span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">4</span>) <span class="sc">~</span> <span class="dv">3</span></span>
<span id="cb37-25"><a href="#cb37-25" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb37-26"><a href="#cb37-26" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb37-27"><a href="#cb37-27" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb37-28"><a href="#cb37-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-29"><a href="#cb37-29" aria-hidden="true" tabindex="-1"></a><span class="co"># Organisaatioaseman muutos</span></span>
<span id="cb37-30"><a href="#cb37-30" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">|&gt;</span></span>
<span id="cb37-31"><a href="#cb37-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb37-32"><a href="#cb37-32" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(</span>
<span id="cb37-33"><a href="#cb37-33" aria-hidden="true" tabindex="-1"></a>      Organisaatioasema,</span>
<span id="cb37-34"><a href="#cb37-34" aria-hidden="true" tabindex="-1"></a>      <span class="sc">~</span> <span class="fu">case_match</span>(</span>
<span id="cb37-35"><a href="#cb37-35" aria-hidden="true" tabindex="-1"></a>        .x,</span>
<span id="cb37-36"><a href="#cb37-36" aria-hidden="true" tabindex="-1"></a>        <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>) <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb37-37"><a href="#cb37-37" aria-hidden="true" tabindex="-1"></a>        <span class="dv">2</span> <span class="sc">~</span> <span class="dv">2</span>,</span>
<span id="cb37-38"><a href="#cb37-38" aria-hidden="true" tabindex="-1"></a>        <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">5</span>) <span class="sc">~</span> <span class="dv">3</span>,</span>
<span id="cb37-39"><a href="#cb37-39" aria-hidden="true" tabindex="-1"></a>        <span class="dv">6</span> <span class="sc">~</span> <span class="dv">4</span></span>
<span id="cb37-40"><a href="#cb37-40" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb37-41"><a href="#cb37-41" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb37-42"><a href="#cb37-42" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Kopioi leikepöydälle" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="sec-anonymisointi-kooste" class="level2" data-number="18.5">
<h2 data-number="18.5" class="anchored" data-anchor-id="sec-anonymisointi-kooste"><span class="header-section-number">18.5</span> Kooste muutoksista</h2>
<p>Teimme seuraavat muutokset datatiedostolle:</p>
<ul>
<li>Organisaatiokuuluvuus (<code>k2</code>): Järjestöt (<code>3</code>) ja koulutusorganisaatiot (<code>4</code>) yhdistettiin yhdeksi luokaksi. Uudet koodit:
<ul>
<li><code>1</code> (Pelastuslaitokset ja ensihoito)</li>
<li><code>2</code> (Sopimuspalokunnat ja palokuntayhdistykset)</li>
<li><code>3</code> (Järjestöt, pelastusliitot ja koulut)</li>
</ul></li>
<li>Poistimme seuraavat muuttujat:
<ul>
<li><code>k7_10_1</code> (aseella tai voimankäyttövälineellä uhkaaminen, organisaation sisäinen, itse koettu)</li>
<li><code>k8_11_2</code> (voimankäyttövälineellä tai aseella vahingoittaminen, organisaation sisäinen, havaittu)</li>
<li><code>k9_5_1</code> (pakotettu seksuaalinen teko tai raiskaus, tai näiden yritys, organisaation sisäinen, itse koettu)</li>
<li><code>k18_5_1</code> (pakotettu seksuaalinen teko tai raiskaus, tai näiden yritys, organisaation ulkopuolinen, itse koettu)</li>
<li><code>k18_5_2</code> (pakotettu seksuaalinen teko tai raiskaus, tai näiden yritys, organisaation ulkopuolinen, havaittu)</li>
</ul></li>
<li>Sukupuoli (<code>k31</code>): Muunsukupuoliset (<code>3</code>) ja vastaamisesta kieltäytyneet (<code>4</code>) yhdistettiin yhdeksi luokaksi. Uudet koodit:
<ul>
<li><code>1</code> (Nainen)</li>
<li><code>2</code> (Mies)</li>
<li><code>3</code> (Muu/EHV)</li>
</ul></li>
<li>Työrytmi, pelastuslaitokset tai ensihoito (<code>k32</code>): Virasto- tai toimistotyöaika (<code>3</code>) ja työ- tai virkavapaalla (<code>4</code>) yhdistettiin yhdeksi luokaksi. Uudet koodit:
<ul>
<li><code>1</code> (24h työvuorot)</li>
<li><code>2</code> (12h työvuorot)</li>
<li><code>3</code> (Muu työaika tai vapaalla)</li>
<li><code>-1</code> (ei esitetty)</li>
</ul></li>
<li>Viikottainen työmääräarvio, sopimuspalokunnat ja palokuntayhdistykset (<code>k33</code>): 11-20 tuntia (<code>4</code>) ja yli 21 tuntia (<code>5</code>) yhdistettiin yhdeksi luokaksi. Uudet koodit:
<ul>
<li><code>1</code> (Alle 2 tuntia viikossa)</li>
<li><code>2</code> (2-5 tuntia viikossa)</li>
<li><code>3</code> (6-10 tuntia viikossa)</li>
<li><code>4</code> (Yli 10 tuntia viikossa)</li>
<li><code>-1</code> (ei esitetty)</li>
</ul></li>
<li>Varallaolon kuukausittainen työmääräarvio, sopimuspalokunnat ja palokuntayhdistykset (<code>k35</code>): 121-200 tuntia (<code>4</code>) ja yli 200 tuntia (<code>5</code>) yhdistettiin yhdeksi luokaksi. Uudet koodit:
<ul>
<li><code>1</code> (En ollenkaan)</li>
<li><code>2</code> (1-60 tuntia)</li>
<li><code>3</code> (61-120 tuntia)</li>
<li><code>4</code> (Yli 120 tuntia)</li>
<li><code>-1</code> (ei esitetty)</li>
</ul></li>
<li>Organisaatioasema (<code>Organisaatioasema</code>): Johto- tai esihenkilötaso (<code>1</code>) ja hallinnollinen tai tukipalveluhenkilöstö (<code>4</code>) yhdistettiin yhdeksi luokaksi, ja asiantuntijat (<code>3</code>) ja opetushenkilöstö (<code>5</code>) yhdistettiin yhdeksi luokaksi. Uudet koodit:
<ul>
<li><code>1</code> (Johto- tai hallintotaso)</li>
<li><code>2</code> (Suorittava henkilöstö)</li>
<li><code>3</code> (Asiantuntijat ja opettajat)</li>
<li><code>4</code> (Opiskelijat)</li>
</ul></li>
<li>Työuran pituus (<code>k41</code>) luokiteltiin neljään fraktiiliin. Uudet koodit:
<ul>
<li><code>1</code> (6 vuotta tai alle)</li>
<li><code>2</code> (6 - 14 vuotta)</li>
<li><code>3</code> (14 - 25 vuotta)</li>
<li><code>4</code> (25 vuotta tai yli)</li>
</ul></li>
<li>Yhden vastaajan organisaatiokuuluvuus (<code>2</code>) muutettiin suojataksemme vastaajan anonymiteettiä.</li>
<li>Kolmen vastaajan sukupuolet (<code>k31</code>) muutettiin satunnaisesti suojataksemme vastaajien anonymiteettiä.</li>
</ul>
</section>
<section id="sec-anonymisointi-datantallennus" class="level2" data-number="18.6">
<h2 data-number="18.6" class="anchored" data-anchor-id="sec-anonymisointi-datantallennus"><span class="header-section-number">18.6</span> Datan tallennus</h2>
<p>Anonymisoinnin jälkeen tallensimme lopullisen datatiedoston <code>csv</code>-muotoon.</p>
<div class="cell">
<details>
<summary>Datan tallennus</summary>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv2</span>(data, <span class="at">file =</span> <span class="st">"output/anonymisoitudata.csv"</span>, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span></code><button title="Kopioi leikepöydälle" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>


<!-- -->

</section>


</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Kopioitu!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Kopioitu!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./puhdistaminen.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Puhdistaminen</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./koodikirja.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Koodikirjan rakentaminen</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Lähdekoodi</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb39" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu"># Anonymisointi {#sec-anonymisointi}</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>eval: true</span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>Tutkimus anonymisoitiin anonymisointisuunnitelman mukaisesti.</span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a>Osiossa käytetty aineisto ei ole saatavilla tietosuojan takia.</span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-13"><a href="#cb39-13" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb39-14"><a href="#cb39-14" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: anon-00-valmistelu</span></span>
<span id="cb39-15"><a href="#cb39-15" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Osiossa käytetyt paketit ja aineiston avaaminen"</span></span>
<span id="cb39-16"><a href="#cb39-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-17"><a href="#cb39-17" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse) <span class="co"># Datakäsittely</span></span>
<span id="cb39-18"><a href="#cb39-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-19"><a href="#cb39-19" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">read.csv2</span>(<span class="st">"output/puhdistettudata.csv"</span>)</span>
<span id="cb39-20"><a href="#cb39-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-21"><a href="#cb39-21" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb39-22"><a href="#cb39-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-25"><a href="#cb39-25" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb39-26"><a href="#cb39-26" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: anon-01-funktiot</span></span>
<span id="cb39-27"><a href="#cb39-27" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Osiossa käytettyjen funktioiden määrittely"</span></span>
<span id="cb39-28"><a href="#cb39-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-29"><a href="#cb39-29" aria-hidden="true" tabindex="-1"></a><span class="co"># Projektipäällikön kirjoittama funktio k-anonymiteetin tarkistamiseksi.</span></span>
<span id="cb39-30"><a href="#cb39-30" aria-hidden="true" tabindex="-1"></a><span class="co"># Funktio vaatii paketit checkmate, cli, dplyr ja rlang.</span></span>
<span id="cb39-31"><a href="#cb39-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-32"><a href="#cb39-32" aria-hidden="true" tabindex="-1"></a>k_anonymity <span class="ot">&lt;-</span> <span class="cf">function</span>(data, limit, ...) {</span>
<span id="cb39-33"><a href="#cb39-33" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Argument checks</span></span>
<span id="cb39-34"><a href="#cb39-34" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span>(checkmate<span class="sc">::</span><span class="fu">check_data_frame</span>(data) <span class="sc">||</span> checkmate<span class="sc">::</span><span class="fu">check_tibble</span>(data))) {</span>
<span id="cb39-35"><a href="#cb39-35" aria-hidden="true" tabindex="-1"></a>    cli<span class="sc">::</span><span class="fu">cli_abort</span>(<span class="fu">c</span>(</span>
<span id="cb39-36"><a href="#cb39-36" aria-hidden="true" tabindex="-1"></a>      <span class="st">"{.var data} must be a data frame or tibble"</span>,</span>
<span id="cb39-37"><a href="#cb39-37" aria-hidden="true" tabindex="-1"></a>      <span class="st">"x"</span> <span class="ot">=</span> <span class="st">"You supplied the type {.cls class(data)}"</span></span>
<span id="cb39-38"><a href="#cb39-38" aria-hidden="true" tabindex="-1"></a>    ))</span>
<span id="cb39-39"><a href="#cb39-39" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb39-40"><a href="#cb39-40" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span>(checkmate<span class="sc">::</span><span class="fu">check_int</span>(limit))) {</span>
<span id="cb39-41"><a href="#cb39-41" aria-hidden="true" tabindex="-1"></a>    cli<span class="sc">::</span><span class="fu">cli_abort</span>(<span class="fu">c</span>(</span>
<span id="cb39-42"><a href="#cb39-42" aria-hidden="true" tabindex="-1"></a>      <span class="st">"{.var limit} must be a single integer"</span>,</span>
<span id="cb39-43"><a href="#cb39-43" aria-hidden="true" tabindex="-1"></a>      <span class="st">"x"</span> <span class="ot">=</span> <span class="st">"You supplied the type {.cls class(limit)}"</span></span>
<span id="cb39-44"><a href="#cb39-44" aria-hidden="true" tabindex="-1"></a>    ))</span>
<span id="cb39-45"><a href="#cb39-45" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb39-46"><a href="#cb39-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-47"><a href="#cb39-47" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Select data according to variables</span></span>
<span id="cb39-48"><a href="#cb39-48" aria-hidden="true" tabindex="-1"></a>  cols <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">quos</span>(...)</span>
<span id="cb39-49"><a href="#cb39-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-50"><a href="#cb39-50" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Capture error from incorrect cols and return more helpful error message</span></span>
<span id="cb39-51"><a href="#cb39-51" aria-hidden="true" tabindex="-1"></a>  selected_data <span class="ot">&lt;-</span> rlang<span class="sc">::</span><span class="fu">try_fetch</span>(</span>
<span id="cb39-52"><a href="#cb39-52" aria-hidden="true" tabindex="-1"></a>    data <span class="sc">|&gt;</span> dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">!!!</span>cols),</span>
<span id="cb39-53"><a href="#cb39-53" aria-hidden="true" tabindex="-1"></a>    <span class="at">error =</span> <span class="cf">function</span>(cnd) {</span>
<span id="cb39-54"><a href="#cb39-54" aria-hidden="true" tabindex="-1"></a>      cli<span class="sc">::</span><span class="fu">cli_abort</span>(<span class="fu">c</span>(</span>
<span id="cb39-55"><a href="#cb39-55" aria-hidden="true" tabindex="-1"></a>        <span class="st">"All supplied columns must exist in {.var data}"</span>,</span>
<span id="cb39-56"><a href="#cb39-56" aria-hidden="true" tabindex="-1"></a>        <span class="st">"X"</span> <span class="ot">=</span> <span class="st">"You supplied the column names {sapply(cols, rlang::f_text)}"</span>,</span>
<span id="cb39-57"><a href="#cb39-57" aria-hidden="true" tabindex="-1"></a>        <span class="st">"i"</span> <span class="ot">=</span> <span class="st">"{.var data} contains the columns {names(data)}"</span>,</span>
<span id="cb39-58"><a href="#cb39-58" aria-hidden="true" tabindex="-1"></a>        <span class="st">"i"</span> <span class="ot">=</span> <span class="st">"Tip: Negated columns must also exist in the data"</span></span>
<span id="cb39-59"><a href="#cb39-59" aria-hidden="true" tabindex="-1"></a>      ),</span>
<span id="cb39-60"><a href="#cb39-60" aria-hidden="true" tabindex="-1"></a>      <span class="at">parent =</span> cnd)</span>
<span id="cb39-61"><a href="#cb39-61" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb39-62"><a href="#cb39-62" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb39-63"><a href="#cb39-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-64"><a href="#cb39-64" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Crosstabulate and retrieve all unique combinations that fall below the limit</span></span>
<span id="cb39-65"><a href="#cb39-65" aria-hidden="true" tabindex="-1"></a>  low_count_cells <span class="ot">&lt;-</span> <span class="fu">table</span>(selected_data, <span class="at">useNA =</span> <span class="st">"always"</span>) <span class="sc">|&gt;</span></span>
<span id="cb39-66"><a href="#cb39-66" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as.data.frame</span>() <span class="sc">|&gt;</span></span>
<span id="cb39-67"><a href="#cb39-67" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">filter</span>(Freq <span class="sc">&lt;</span> limit)</span>
<span id="cb39-68"><a href="#cb39-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-69"><a href="#cb39-69" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Exit early if no cells fall below the threshold</span></span>
<span id="cb39-70"><a href="#cb39-70" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">length</span>(low_count_cells) <span class="sc">==</span> <span class="dv">0</span>) {</span>
<span id="cb39-71"><a href="#cb39-71" aria-hidden="true" tabindex="-1"></a>    <span class="fu">message</span>(<span class="st">"All variable combinations are at or above the supplied threshold"</span>)</span>
<span id="cb39-72"><a href="#cb39-72" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="cn">NULL</span>)</span>
<span id="cb39-73"><a href="#cb39-73" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb39-74"><a href="#cb39-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-75"><a href="#cb39-75" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(low_count_cells)</span>
<span id="cb39-76"><a href="#cb39-76" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb39-77"><a href="#cb39-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-78"><a href="#cb39-78" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb39-79"><a href="#cb39-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-80"><a href="#cb39-80" aria-hidden="true" tabindex="-1"></a><span class="fu">## Anonymisoinnin järjestys {#sec-anonymisointi-jarjestys}</span></span>
<span id="cb39-81"><a href="#cb39-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-82"><a href="#cb39-82" aria-hidden="true" tabindex="-1"></a><span class="ss">1.  </span>Tarkistetaan taustamuuttujien kategoriat harvinaisten vastausten osalta yksitellen, ja yhdistetään kategorioita tarpeen mukaan.</span>
<span id="cb39-83"><a href="#cb39-83" aria-hidden="true" tabindex="-1"></a><span class="ss">2.  </span>Tarkistetaan harvinaisten ilmiöiden muuttujien kategoriat harvinaisten vastausten osalta yksitellen, ja yhdistetään tai poistetaan kategorioita/muuttujia tarpeen mukaan.</span>
<span id="cb39-84"><a href="#cb39-84" aria-hidden="true" tabindex="-1"></a><span class="ss">3.  </span>Taustamuuttujat 4-anonymisoidaan kolmen muuttujan yhdistelmissä, ja yhdistetään kategorioita tarpeen mukaan<span class="ot">[^anonymisointi-1]</span>.</span>
<span id="cb39-85"><a href="#cb39-85" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-86"><a href="#cb39-86" aria-hidden="true" tabindex="-1"></a><span class="ot">[^anonymisointi-1]: </span>Alkuperäisessä suunnitelmassa tarkoituksena oli 5-anonymisoida muuttujat kahden ja kolmen muuttujan yhdistelmissä. Tarkastaessamme anonymisointia huomasimme kuitenkin, ettei 5-anonymiteettiä voitu toteuttaa ilman laajoja kategoriayhdistämisiä. Tämä olisi vähentänyt datan jatkokäytettävyyttä liikaa. Laskemalla k-arvon neljään pystyimme suorittamaan anonymisoinnin sopivalla määrällä kategoriayhdistelmiä, jotta jatkokäytettävyys säilyy. Jätimme myös pois kahden muuttujan tarkistuksen, sillä kolmen muuttujan tarkistus varmisti kahden muuttujan välisen anonymiteetin.</span>
<span id="cb39-87"><a href="#cb39-87" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-88"><a href="#cb39-88" aria-hidden="true" tabindex="-1"></a>Näiden lisäksi luokittelimme muuttujan <span class="in">`k43`</span> avovastaukset luokkiin aikaisemmin (ks. @sec-valmistelu-avovastaukset). Näiden anonymiteetti oli taattu luokitteluprosessissa.</span>
<span id="cb39-89"><a href="#cb39-89" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-90"><a href="#cb39-90" aria-hidden="true" tabindex="-1"></a>**Kohta 1: Käsiteltävät taustamuuttujat:**</span>
<span id="cb39-91"><a href="#cb39-91" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-92"><a href="#cb39-92" aria-hidden="true" tabindex="-1"></a><span class="ss">1.  </span>Organisaatiokuuluvuus (<span class="in">`k2`</span>, neljä kategoriaa)</span>
<span id="cb39-93"><a href="#cb39-93" aria-hidden="true" tabindex="-1"></a><span class="ss">    1.  </span>Kaikilla vastaajilla tulee olla yksi arvo.</span>
<span id="cb39-94"><a href="#cb39-94" aria-hidden="true" tabindex="-1"></a><span class="ss">    2.  </span>Määräsääntö: <span class="in">`n &gt; 5`</span></span>
<span id="cb39-95"><a href="#cb39-95" aria-hidden="true" tabindex="-1"></a><span class="ss">    3.  </span>Yhdistetään luokat <span class="in">`1`</span> ja <span class="in">`2`</span> sekä <span class="in">`3`</span> ja <span class="in">`4`</span> tarpeen vaatiessa.</span>
<span id="cb39-96"><a href="#cb39-96" aria-hidden="true" tabindex="-1"></a><span class="ss">2.  </span>Sukupuoli (<span class="in">`k31`</span>, neljä kategoriaa)</span>
<span id="cb39-97"><a href="#cb39-97" aria-hidden="true" tabindex="-1"></a><span class="ss">    1.  </span>Kaikilla vastaajilla tulee olla yksi arvo.</span>
<span id="cb39-98"><a href="#cb39-98" aria-hidden="true" tabindex="-1"></a><span class="ss">    2.  </span>Määräsääntö: <span class="in">`n &gt; 30`</span></span>
<span id="cb39-99"><a href="#cb39-99" aria-hidden="true" tabindex="-1"></a><span class="ss">    3.  </span>Yhdistetään luokat <span class="in">`1`</span>, <span class="in">`3`</span> ja <span class="in">`4`</span> pienimpään toiseen luokkaan, joka täyttää määräsäännön.</span>
<span id="cb39-100"><a href="#cb39-100" aria-hidden="true" tabindex="-1"></a><span class="ss">3.  </span>Työrytmi (<span class="in">`k32-k35`</span>, <span class="in">`k37`</span>)</span>
<span id="cb39-101"><a href="#cb39-101" aria-hidden="true" tabindex="-1"></a><span class="ss">    1.  </span>Kaikilla vastaajilla tulee olla yksi arvo, organisaatiokuuluvuudensa mukaisesti.</span>
<span id="cb39-102"><a href="#cb39-102" aria-hidden="true" tabindex="-1"></a><span class="ss">    2.  </span>Määräsääntö: <span class="in">`n &gt; 10`</span></span>
<span id="cb39-103"><a href="#cb39-103" aria-hidden="true" tabindex="-1"></a><span class="ss">    3.  </span>Muuttuja <span class="in">`k32`</span>: Yhdistetään samanaiheiseen kategoriaan tarpeen vaatiessa.</span>
<span id="cb39-104"><a href="#cb39-104" aria-hidden="true" tabindex="-1"></a><span class="ss">    4.  </span>Muuttuja <span class="in">`k33`</span>: Yhdistetään viereiseen kategoriaan tarpeen vaatiessa.</span>
<span id="cb39-105"><a href="#cb39-105" aria-hidden="true" tabindex="-1"></a><span class="ss">    5.  </span>Muuttuja <span class="in">`k34`</span>: Ei muutoksia.</span>
<span id="cb39-106"><a href="#cb39-106" aria-hidden="true" tabindex="-1"></a><span class="ss">    6.  </span>Muuttuja <span class="in">`k35`</span>: Yhdistetään viereiseen kategoriaan tarpeen vaatiessa.</span>
<span id="cb39-107"><a href="#cb39-107" aria-hidden="true" tabindex="-1"></a><span class="ss">    7.  </span>Muuttuja <span class="in">`k37`</span>: Yhdistetään samanaiheiseen kategoriaan tarpeen vaatiessa.</span>
<span id="cb39-108"><a href="#cb39-108" aria-hidden="true" tabindex="-1"></a><span class="ss">4.  </span>Organisaatioasema (<span class="in">`Organisaatioasema`</span>, kuusi kategoriaa)</span>
<span id="cb39-109"><a href="#cb39-109" aria-hidden="true" tabindex="-1"></a><span class="ss">    1.  </span>Kaikilla vastaajilla tulee olla yksi arvo.</span>
<span id="cb39-110"><a href="#cb39-110" aria-hidden="true" tabindex="-1"></a><span class="ss">    2.  </span>Rakennetaan eri organisaatioasemamuuttujista (@sec-valmistelu-uudelleenkoodaukset-organisaatioasema)</span>
<span id="cb39-111"><a href="#cb39-111" aria-hidden="true" tabindex="-1"></a><span class="ss">    3.  </span>Määräsääntö: <span class="in">`n &gt; 10`</span></span>
<span id="cb39-112"><a href="#cb39-112" aria-hidden="true" tabindex="-1"></a><span class="ss">    4.  </span>Yhdistetään luokat <span class="in">`1`</span> ja <span class="in">`4`</span> tarpeen vaatiessa.</span>
<span id="cb39-113"><a href="#cb39-113" aria-hidden="true" tabindex="-1"></a><span class="ss">    5.  </span>Muut luokat yhdistetään aiheittain tarpeen vaatiessa.</span>
<span id="cb39-114"><a href="#cb39-114" aria-hidden="true" tabindex="-1"></a><span class="ss">5.  </span>Työuran pituus (<span class="in">`k41`</span>): Viiden fraktiilin luokitus</span>
<span id="cb39-115"><a href="#cb39-115" aria-hidden="true" tabindex="-1"></a><span class="ss">    1.  </span>Kaikilla vastaajilla tulee olla yksi arvo.</span>
<span id="cb39-116"><a href="#cb39-116" aria-hidden="true" tabindex="-1"></a><span class="ss">    2.  </span>Luokitellaan viiteen fraktiiliin, mikä riittää yksimuuttuja-anonymisoinnille.</span>
<span id="cb39-117"><a href="#cb39-117" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-118"><a href="#cb39-118" aria-hidden="true" tabindex="-1"></a>**Kohta 2: Harvinaisten ilmiöiden muuttujat:**</span>
<span id="cb39-119"><a href="#cb39-119" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-120"><a href="#cb39-120" aria-hidden="true" tabindex="-1"></a><span class="ss">1.  </span>Epäasiallisen ja väkivaltaisen kohtelun yleisyys (<span class="in">`k3_1:k4_7`</span>, <span class="in">`k12_1:k13_7`</span>)</span>
<span id="cb39-121"><a href="#cb39-121" aria-hidden="true" tabindex="-1"></a><span class="ss">    1.  </span>Yhteensä 28 muuttujaa</span>
<span id="cb39-122"><a href="#cb39-122" aria-hidden="true" tabindex="-1"></a><span class="ss">    2.  </span>Kaikilla vastaajilla tulee olla yksi arvo, mikä voi myös olla arvo <span class="in">`NA`</span></span>
<span id="cb39-123"><a href="#cb39-123" aria-hidden="true" tabindex="-1"></a><span class="ss">    3.  </span>Sovelletaan 5-anonymiteettia (ks. kohta 4)</span>
<span id="cb39-124"><a href="#cb39-124" aria-hidden="true" tabindex="-1"></a><span class="ss">2.  </span>Kohtelun selventävät mittarit (<span class="in">`k5_3_1:k5_3_2`</span>, <span class="in">`k7_10_1:k7_10_2`</span>, <span class="in">`k8_11_1:k8_11_2`</span>, <span class="in">`k9_5_1:k9_5_2`</span>, <span class="in">`k9_10_1:k9_10_2`</span>, <span class="in">`k10_2_1:k10_2_2`</span>, <span class="in">`k10_10_1:k10_10_2`</span>, <span class="in">`k10_11_1:k10_11_2`</span>, <span class="in">`k11_6_1:k11_6_2`</span>, <span class="in">`k14_3_1:k14_3_2`</span>, <span class="in">`k16_10_1:k16_10_2`</span>, <span class="in">`k17_11_1:k17_11_2`</span>, <span class="in">`k18_5_1:k18_5_2`</span>, <span class="in">`k18_10_1:k18_10_2`</span>, <span class="in">`k19_2_1:k19_2_2`</span>, <span class="in">`k19_10_1:k19_10_2`</span>, <span class="in">`k19_11_1:k19_11_2`</span>)</span>
<span id="cb39-125"><a href="#cb39-125" aria-hidden="true" tabindex="-1"></a><span class="ss">    1.  </span>Yhteensä 34 muuttujaa</span>
<span id="cb39-126"><a href="#cb39-126" aria-hidden="true" tabindex="-1"></a><span class="ss">    2.  </span>Kaikilla vastaajilla tulee olla yksi arvo, mikä voi myös olla arvo <span class="in">`NA`</span> tai <span class="in">`-1`</span></span>
<span id="cb39-127"><a href="#cb39-127" aria-hidden="true" tabindex="-1"></a><span class="ss">    3.  </span>Määräsääntö: <span class="in">`n &gt; 5`</span></span>
<span id="cb39-128"><a href="#cb39-128" aria-hidden="true" tabindex="-1"></a><span class="ss">    4.  </span>Muuttuja poistetaan jos määräsääntö ei täyty jokaisen kategorian osalta (<span class="in">`NA`</span>, <span class="in">`-1`</span>, <span class="in">`1`</span>)</span>
<span id="cb39-129"><a href="#cb39-129" aria-hidden="true" tabindex="-1"></a><span class="ss">3.  </span>Vaikutukset jatkuvat yhä (<span class="in">`k22_1_1:k22_3_1`</span>)</span>
<span id="cb39-130"><a href="#cb39-130" aria-hidden="true" tabindex="-1"></a><span class="ss">    1.  </span>Yhteensä 3 muuttujaa</span>
<span id="cb39-131"><a href="#cb39-131" aria-hidden="true" tabindex="-1"></a><span class="ss">    2.  </span>Kaikilla vastaajilla tulee olla yksi arvo, mikä voi myös olla arvo <span class="in">`NA`</span> tai <span class="in">`-1`</span></span>
<span id="cb39-132"><a href="#cb39-132" aria-hidden="true" tabindex="-1"></a><span class="ss">    3.  </span>Sovelletaan 5-anonymiteettia (ks. kohta 4)</span>
<span id="cb39-133"><a href="#cb39-133" aria-hidden="true" tabindex="-1"></a><span class="ss">4.  </span>Reaktiot kohteluun (<span class="in">`k23_1:k23_11`</span>)</span>
<span id="cb39-134"><a href="#cb39-134" aria-hidden="true" tabindex="-1"></a><span class="ss">    1.  </span>Yhteensä 11 muuttujaa</span>
<span id="cb39-135"><a href="#cb39-135" aria-hidden="true" tabindex="-1"></a><span class="ss">    2.  </span>Kaikilla vastaajilla tulee olla yksi arvo, mikä voi myös olla arvo <span class="in">`NA`</span> tai <span class="in">`-1`</span></span>
<span id="cb39-136"><a href="#cb39-136" aria-hidden="true" tabindex="-1"></a><span class="ss">    3.  </span>Sovelletaan 5-anonymiteettia (ks. kohta 4)</span>
<span id="cb39-137"><a href="#cb39-137" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-138"><a href="#cb39-138" aria-hidden="true" tabindex="-1"></a>**Kohta 3: Taustamuuttujien 4-anonymisointi ristiintaulukoimalla**</span>
<span id="cb39-139"><a href="#cb39-139" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-140"><a href="#cb39-140" aria-hidden="true" tabindex="-1"></a><span class="ss">1.  </span>Organisaatiokuuluvuus x Organisaatioasema x Sukupuoli (<span class="in">`k2 * Organisaatioasema * k31`</span>)</span>
<span id="cb39-141"><a href="#cb39-141" aria-hidden="true" tabindex="-1"></a><span class="ss">2.  </span>Organisaatiokuuluvuus x Organisaatioasema x Työrytmi (<span class="in">`k2 * Organisaatioasema * k32, k33, k34, k35, k37`</span>)</span>
<span id="cb39-142"><a href="#cb39-142" aria-hidden="true" tabindex="-1"></a><span class="ss">3.  </span>Organisaatiokuuluvuus x Organisaatioasema x Työuran pituus (<span class="in">`k2 * Organisaatioasema * k41`</span>)</span>
<span id="cb39-143"><a href="#cb39-143" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-144"><a href="#cb39-144" aria-hidden="true" tabindex="-1"></a>Kaikilla taustamuuttujilla seurattiin seuraavaa prioriteettijärjestystä muutoksissa:</span>
<span id="cb39-145"><a href="#cb39-145" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-146"><a href="#cb39-146" aria-hidden="true" tabindex="-1"></a><span class="ss">1.  </span>Organisaatioaseman (<span class="in">`Organisaatioasema`</span>) kategoriat yhdistetään vähintään neljäksi kategoriaksi.</span>
<span id="cb39-147"><a href="#cb39-147" aria-hidden="true" tabindex="-1"></a><span class="ss">2.  </span>Työrytmin (<span class="in">`k32, k33, k34, k35, k37`</span>) kategoriat yhdistetään vähintään kolmeksi kategoriaksi.</span>
<span id="cb39-148"><a href="#cb39-148" aria-hidden="true" tabindex="-1"></a><span class="ss">    1.  </span>Poikkeuksena <span class="in">`k34`</span>, jolle ei voida tehdä muutoksia.</span>
<span id="cb39-149"><a href="#cb39-149" aria-hidden="true" tabindex="-1"></a><span class="ss">3.  </span>Työuran pituuden (<span class="in">`k41`</span>) fraktiileja vähennetään vähintään kolmeen fraktiiliin.</span>
<span id="cb39-150"><a href="#cb39-150" aria-hidden="true" tabindex="-1"></a><span class="ss">4.  </span>Sukupuolen (<span class="in">`k31`</span>) kategoriat yhdistetään vähintään kahteen kategoriaan.</span>
<span id="cb39-151"><a href="#cb39-151" aria-hidden="true" tabindex="-1"></a><span class="ss">5.  </span>Organisaatiokuuluvuuden (<span class="in">`k2`</span>) kategoriat yhdistetään vähintään kolmeen kategoriaan.</span>
<span id="cb39-152"><a href="#cb39-152" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-153"><a href="#cb39-153" aria-hidden="true" tabindex="-1"></a><span class="fu">## Kohta 1: Taustamuuttujien anonymisointi {#sec-anonymisointi-kohta1}</span></span>
<span id="cb39-154"><a href="#cb39-154" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-157"><a href="#cb39-157" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb39-158"><a href="#cb39-158" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: anon-02-taustamuuttujat</span></span>
<span id="cb39-159"><a href="#cb39-159" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Taustamuuttujien k-tarkastus"</span></span>
<span id="cb39-160"><a href="#cb39-160" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-161"><a href="#cb39-161" aria-hidden="true" tabindex="-1"></a><span class="fu">k_anonymity</span>(data, <span class="at">limit =</span> <span class="dv">5</span>, k2)</span>
<span id="cb39-162"><a href="#cb39-162" aria-hidden="true" tabindex="-1"></a><span class="fu">k_anonymity</span>(data, <span class="at">limit =</span> <span class="dv">30</span>, k31)</span>
<span id="cb39-163"><a href="#cb39-163" aria-hidden="true" tabindex="-1"></a><span class="fu">k_anonymity</span>(data, <span class="at">limit =</span> <span class="dv">10</span>, k32)</span>
<span id="cb39-164"><a href="#cb39-164" aria-hidden="true" tabindex="-1"></a><span class="fu">k_anonymity</span>(data, <span class="at">limit =</span> <span class="dv">10</span>, k33)</span>
<span id="cb39-165"><a href="#cb39-165" aria-hidden="true" tabindex="-1"></a><span class="fu">k_anonymity</span>(data, <span class="at">limit =</span> <span class="dv">10</span>, k34)</span>
<span id="cb39-166"><a href="#cb39-166" aria-hidden="true" tabindex="-1"></a><span class="fu">k_anonymity</span>(data, <span class="at">limit =</span> <span class="dv">10</span>, k35)</span>
<span id="cb39-167"><a href="#cb39-167" aria-hidden="true" tabindex="-1"></a><span class="fu">k_anonymity</span>(data, <span class="at">limit =</span> <span class="dv">10</span>, k37)</span>
<span id="cb39-168"><a href="#cb39-168" aria-hidden="true" tabindex="-1"></a><span class="fu">k_anonymity</span>(data, <span class="at">limit =</span> <span class="dv">10</span>, Organisaatioasema)</span>
<span id="cb39-169"><a href="#cb39-169" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-170"><a href="#cb39-170" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb39-171"><a href="#cb39-171" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-172"><a href="#cb39-172" aria-hidden="true" tabindex="-1"></a>Organisaatiokuuluvuusmuuttujalla (<span class="in">`k2`</span>) ei ollut yhtään ongelmallista kategoriaa.</span>
<span id="cb39-173"><a href="#cb39-173" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-174"><a href="#cb39-174" aria-hidden="true" tabindex="-1"></a>Sukupuolimuuttujalla (<span class="in">`k31`</span>) oli yksi ongelmallinen kategoria: muunsukupuolisia (<span class="in">`k31 == 3`</span>) oli seitsemän vastaajaa. Seuraavaksi pienin ryhmä oli vastaamisesta kieltäytyneet (<span class="in">`k31 == 4`</span>, yhteensä <span class="in">`r summary(as.factor(data$k31))[4]`</span> vastaajaa).</span>
<span id="cb39-175"><a href="#cb39-175" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-176"><a href="#cb39-176" aria-hidden="true" tabindex="-1"></a>Pelastuslaitoksen tai ensihoidon työrytmimuuttujalla (<span class="in">`k32`</span>) oli yksi ongelmallinen kategoria: työ- tai virkavapaalla olevia (<span class="in">`k32 == 4`</span>) oli yhteensä kaksi kappaletta. Seuraavaksi pienin ryhmä oli kahdentoista tunnin työvuorot (<span class="in">`k32 == 2`</span>, yhteensä <span class="in">`r summary(as.factor(data$k32))[2]`</span> vastaajaa).</span>
<span id="cb39-177"><a href="#cb39-177" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-178"><a href="#cb39-178" aria-hidden="true" tabindex="-1"></a>Sopimuspalokuntien ja palokuntayhdistysten viikottaisen työmääräarvion muuttujalla (<span class="in">`k33`</span>) oli yksi ongelmallinen kategoria: yli 21 tuntia viikossa tekeviä (<span class="in">`k33 == 5`</span>) oli yhteensä 7 henkilöä.</span>
<span id="cb39-179"><a href="#cb39-179" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-180"><a href="#cb39-180" aria-hidden="true" tabindex="-1"></a>Sopimuspalokuntien ja palokuntayhdistysten varallaolomuuttujalla (<span class="in">`k34`</span>) ei ollut yhtään ongelmallista kategoriaa.</span>
<span id="cb39-181"><a href="#cb39-181" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-182"><a href="#cb39-182" aria-hidden="true" tabindex="-1"></a>Sopimuspalokuntien ja palokuntayhdistysten varallaolon kuukausittaisen työmääräarvion muuttujalla (<span class="in">`k35`</span>) oli yksi ongelmallinen kategoria: yli 200 tuntia tekeviä (<span class="in">`k35 == 5`</span>) oli yhteensä 7 vastaajaa.</span>
<span id="cb39-183"><a href="#cb39-183" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-184"><a href="#cb39-184" aria-hidden="true" tabindex="-1"></a>Järjestöjen ja koulutusorganisaatioiden työrytmimuuttujalla (<span class="in">`k37`</span>) ei ollut yhtään ongelmallista kategoriaa.</span>
<span id="cb39-185"><a href="#cb39-185" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-186"><a href="#cb39-186" aria-hidden="true" tabindex="-1"></a>Rakennetulla organisaatioasemamuuttujalla (<span class="in">`Organisaatioasema`</span>) ei ollut yhtään ongelmallista kategoriaa.</span>
<span id="cb39-187"><a href="#cb39-187" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-188"><a href="#cb39-188" aria-hidden="true" tabindex="-1"></a>Teimme seuraavat muutokset:</span>
<span id="cb39-189"><a href="#cb39-189" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-190"><a href="#cb39-190" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Sukupuoli (<span class="in">`k31`</span>): Muunsukupuoliset yhdistettiin vastaamisesta kieltäytyneisiin uudeksi koodiksi <span class="in">`3`</span>. Täten koodia <span class="in">`4`</span> ei enää esiinny, ja uudet koodivaihtoehdot olivat:</span>
<span id="cb39-191"><a href="#cb39-191" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="in">`1`</span> (Mies)</span>
<span id="cb39-192"><a href="#cb39-192" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="in">`2`</span> (Nainen)</span>
<span id="cb39-193"><a href="#cb39-193" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="in">`3`</span> (Muu tai ei halua vastata)</span>
<span id="cb39-194"><a href="#cb39-194" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Pelastuslaitoksen tai ensihoidon työrytmi (<span class="in">`k32`</span>): Työ- tai virkavapaaalla olevat yhdistettiin virasto- tai toimistotyöaikaan (<span class="in">`3`</span>). Täten koodia <span class="in">`4`</span> ei enää esiinny, ja uudet koodivaihtoehdot olivat:</span>
<span id="cb39-195"><a href="#cb39-195" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="in">`-1`</span> (ei esitetty)</span>
<span id="cb39-196"><a href="#cb39-196" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="in">`1`</span> (24h työvuorot)</span>
<span id="cb39-197"><a href="#cb39-197" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="in">`2`</span> (12h työvuorot)</span>
<span id="cb39-198"><a href="#cb39-198" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="in">`3`</span> (Virasto- tai toimistotyöaika, työ- tai virkavapaalla)</span>
<span id="cb39-199"><a href="#cb39-199" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Sopimuspalokuntien ja palokuntayhdistysten viikottainen työmääräarvio (<span class="in">`k33`</span>): Yli 21 tuntia tekevät (<span class="in">`5`</span>) yhdistettiin viereiseen 11-20 tuntia viikossa tekeviin (<span class="in">`4`</span>). Täten koodia <span class="in">`5`</span> ei enää esiinny, ja uudet koodivaihtoehdot olivat:</span>
<span id="cb39-200"><a href="#cb39-200" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="in">`-1`</span> (ei esitetty)</span>
<span id="cb39-201"><a href="#cb39-201" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="in">`1`</span> (alle 2 tuntia viikossa)</span>
<span id="cb39-202"><a href="#cb39-202" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="in">`2`</span> (2-5 tuntia viikossa)</span>
<span id="cb39-203"><a href="#cb39-203" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="in">`3`</span> (6-10 tuntia viikossa)</span>
<span id="cb39-204"><a href="#cb39-204" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="in">`4`</span> (yli 10 tuntia viikossa)</span>
<span id="cb39-205"><a href="#cb39-205" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Sopimuspalokuntien ja palokuntayhdistysten varallaolon kuukausittainen työmääräarvio (<span class="in">`k35`</span>): Yli 200 tuntia tekevät (<span class="in">`5`</span>) yhdistettiin viereiseen 121-200 tuntia tekeviin (<span class="in">`4`</span>). Täten koodia <span class="in">`5`</span> ei enää esiinny, ja uudet koodivaihtoehdot olivat:</span>
<span id="cb39-206"><a href="#cb39-206" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="in">`-1`</span> (ei esitetty)</span>
<span id="cb39-207"><a href="#cb39-207" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="in">`1`</span> (en ollenkaan)</span>
<span id="cb39-208"><a href="#cb39-208" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="in">`2`</span> (1-60 tuntia)</span>
<span id="cb39-209"><a href="#cb39-209" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="in">`3`</span> (61-120 tuntia)</span>
<span id="cb39-210"><a href="#cb39-210" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="in">`4`</span> (yli 120 tuntia)</span>
<span id="cb39-211"><a href="#cb39-211" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-214"><a href="#cb39-214" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb39-215"><a href="#cb39-215" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: anon-03-muutokset</span></span>
<span id="cb39-216"><a href="#cb39-216" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Taustamuuttujien muutokset"</span></span>
<span id="cb39-217"><a href="#cb39-217" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-218"><a href="#cb39-218" aria-hidden="true" tabindex="-1"></a><span class="co"># Sukupuolen muutos (k31)</span></span>
<span id="cb39-219"><a href="#cb39-219" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">|&gt;</span></span>
<span id="cb39-220"><a href="#cb39-220" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb39-221"><a href="#cb39-221" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(</span>
<span id="cb39-222"><a href="#cb39-222" aria-hidden="true" tabindex="-1"></a>      k31,</span>
<span id="cb39-223"><a href="#cb39-223" aria-hidden="true" tabindex="-1"></a>      <span class="sc">~</span> <span class="fu">case_match</span>(</span>
<span id="cb39-224"><a href="#cb39-224" aria-hidden="true" tabindex="-1"></a>        .x,</span>
<span id="cb39-225"><a href="#cb39-225" aria-hidden="true" tabindex="-1"></a>        <span class="dv">1</span> <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb39-226"><a href="#cb39-226" aria-hidden="true" tabindex="-1"></a>        <span class="dv">2</span> <span class="sc">~</span> <span class="dv">2</span>,</span>
<span id="cb39-227"><a href="#cb39-227" aria-hidden="true" tabindex="-1"></a>        <span class="dv">3</span> <span class="sc">~</span> <span class="dv">3</span>,</span>
<span id="cb39-228"><a href="#cb39-228" aria-hidden="true" tabindex="-1"></a>        <span class="dv">4</span> <span class="sc">~</span> <span class="dv">3</span></span>
<span id="cb39-229"><a href="#cb39-229" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb39-230"><a href="#cb39-230" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb39-231"><a href="#cb39-231" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb39-232"><a href="#cb39-232" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-233"><a href="#cb39-233" aria-hidden="true" tabindex="-1"></a><span class="co"># Pelastuslaitoksen ja ensihoidon työrytmin muutos (k32)</span></span>
<span id="cb39-234"><a href="#cb39-234" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">|&gt;</span></span>
<span id="cb39-235"><a href="#cb39-235" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb39-236"><a href="#cb39-236" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(</span>
<span id="cb39-237"><a href="#cb39-237" aria-hidden="true" tabindex="-1"></a>      k32,</span>
<span id="cb39-238"><a href="#cb39-238" aria-hidden="true" tabindex="-1"></a>      <span class="sc">~</span> <span class="fu">case_match</span>(</span>
<span id="cb39-239"><a href="#cb39-239" aria-hidden="true" tabindex="-1"></a>        .x,</span>
<span id="cb39-240"><a href="#cb39-240" aria-hidden="true" tabindex="-1"></a>        <span class="dv">1</span> <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb39-241"><a href="#cb39-241" aria-hidden="true" tabindex="-1"></a>        <span class="dv">2</span> <span class="sc">~</span> <span class="dv">2</span>,</span>
<span id="cb39-242"><a href="#cb39-242" aria-hidden="true" tabindex="-1"></a>        <span class="dv">3</span> <span class="sc">~</span> <span class="dv">3</span>,</span>
<span id="cb39-243"><a href="#cb39-243" aria-hidden="true" tabindex="-1"></a>        <span class="dv">4</span> <span class="sc">~</span> <span class="dv">3</span>,</span>
<span id="cb39-244"><a href="#cb39-244" aria-hidden="true" tabindex="-1"></a>        <span class="sc">-</span><span class="dv">1</span> <span class="sc">~</span> <span class="sc">-</span><span class="dv">1</span></span>
<span id="cb39-245"><a href="#cb39-245" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb39-246"><a href="#cb39-246" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb39-247"><a href="#cb39-247" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb39-248"><a href="#cb39-248" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-249"><a href="#cb39-249" aria-hidden="true" tabindex="-1"></a><span class="co"># Sopimuspalokuntien ja palokuntayhdistysten viikottaisen työmääräarvion muutos (k33)</span></span>
<span id="cb39-250"><a href="#cb39-250" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">|&gt;</span></span>
<span id="cb39-251"><a href="#cb39-251" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb39-252"><a href="#cb39-252" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(</span>
<span id="cb39-253"><a href="#cb39-253" aria-hidden="true" tabindex="-1"></a>      k33,</span>
<span id="cb39-254"><a href="#cb39-254" aria-hidden="true" tabindex="-1"></a>      <span class="sc">~</span> <span class="fu">case_match</span>(</span>
<span id="cb39-255"><a href="#cb39-255" aria-hidden="true" tabindex="-1"></a>        .x,</span>
<span id="cb39-256"><a href="#cb39-256" aria-hidden="true" tabindex="-1"></a>        <span class="dv">1</span> <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb39-257"><a href="#cb39-257" aria-hidden="true" tabindex="-1"></a>        <span class="dv">2</span> <span class="sc">~</span> <span class="dv">2</span>,</span>
<span id="cb39-258"><a href="#cb39-258" aria-hidden="true" tabindex="-1"></a>        <span class="dv">3</span> <span class="sc">~</span> <span class="dv">3</span>,</span>
<span id="cb39-259"><a href="#cb39-259" aria-hidden="true" tabindex="-1"></a>        <span class="dv">4</span> <span class="sc">~</span> <span class="dv">4</span>,</span>
<span id="cb39-260"><a href="#cb39-260" aria-hidden="true" tabindex="-1"></a>        <span class="dv">5</span> <span class="sc">~</span> <span class="dv">4</span>,</span>
<span id="cb39-261"><a href="#cb39-261" aria-hidden="true" tabindex="-1"></a>        <span class="sc">-</span><span class="dv">1</span> <span class="sc">~</span> <span class="sc">-</span><span class="dv">1</span></span>
<span id="cb39-262"><a href="#cb39-262" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb39-263"><a href="#cb39-263" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb39-264"><a href="#cb39-264" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb39-265"><a href="#cb39-265" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-266"><a href="#cb39-266" aria-hidden="true" tabindex="-1"></a><span class="co"># Sopimuspalokuntien ja palokuntayhdistysten varallaolon kuukausittaisen työmääräarvion muutos (k35)</span></span>
<span id="cb39-267"><a href="#cb39-267" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">|&gt;</span></span>
<span id="cb39-268"><a href="#cb39-268" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb39-269"><a href="#cb39-269" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(</span>
<span id="cb39-270"><a href="#cb39-270" aria-hidden="true" tabindex="-1"></a>      k35,</span>
<span id="cb39-271"><a href="#cb39-271" aria-hidden="true" tabindex="-1"></a>      <span class="sc">~</span> <span class="fu">case_match</span>(</span>
<span id="cb39-272"><a href="#cb39-272" aria-hidden="true" tabindex="-1"></a>        .x,</span>
<span id="cb39-273"><a href="#cb39-273" aria-hidden="true" tabindex="-1"></a>        <span class="dv">1</span> <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb39-274"><a href="#cb39-274" aria-hidden="true" tabindex="-1"></a>        <span class="dv">2</span> <span class="sc">~</span> <span class="dv">2</span>,</span>
<span id="cb39-275"><a href="#cb39-275" aria-hidden="true" tabindex="-1"></a>        <span class="dv">3</span> <span class="sc">~</span> <span class="dv">3</span>,</span>
<span id="cb39-276"><a href="#cb39-276" aria-hidden="true" tabindex="-1"></a>        <span class="dv">4</span> <span class="sc">~</span> <span class="dv">4</span>,</span>
<span id="cb39-277"><a href="#cb39-277" aria-hidden="true" tabindex="-1"></a>        <span class="dv">5</span> <span class="sc">~</span> <span class="dv">4</span>,</span>
<span id="cb39-278"><a href="#cb39-278" aria-hidden="true" tabindex="-1"></a>        <span class="sc">-</span><span class="dv">1</span> <span class="sc">~</span> <span class="sc">-</span><span class="dv">1</span></span>
<span id="cb39-279"><a href="#cb39-279" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb39-280"><a href="#cb39-280" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb39-281"><a href="#cb39-281" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb39-282"><a href="#cb39-282" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-283"><a href="#cb39-283" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb39-284"><a href="#cb39-284" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-285"><a href="#cb39-285" aria-hidden="true" tabindex="-1"></a>Näiden lisäksi luokittelimme työuran pituuden muuttujan (<span class="in">`k41`</span>) ensin viiteen fraktiiliin. Myöhemmässä tarkastuksessa huomattiin, että fraktiilit piti vähentää neljään säilyttääksemme k-anonymiteetin. Muutos tehtiin takautuvasti tässä dokumentissa.</span>
<span id="cb39-286"><a href="#cb39-286" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-289"><a href="#cb39-289" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb39-290"><a href="#cb39-290" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: anon-03-1-fraktiililuokitus</span></span>
<span id="cb39-291"><a href="#cb39-291" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Työuran pituuden fraktiililuokittelu"</span></span>
<span id="cb39-292"><a href="#cb39-292" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-293"><a href="#cb39-293" aria-hidden="true" tabindex="-1"></a>fraktiilit <span class="ot">&lt;-</span> <span class="fu">quantile</span>(</span>
<span id="cb39-294"><a href="#cb39-294" aria-hidden="true" tabindex="-1"></a>  data<span class="sc">$</span>k41,</span>
<span id="cb39-295"><a href="#cb39-295" aria-hidden="true" tabindex="-1"></a>  <span class="at">probs =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.25</span>, <span class="fl">0.5</span>, <span class="fl">0.75</span>, <span class="dv">1</span>)</span>
<span id="cb39-296"><a href="#cb39-296" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb39-297"><a href="#cb39-297" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-298"><a href="#cb39-298" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">|&gt;</span></span>
<span id="cb39-299"><a href="#cb39-299" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb39-300"><a href="#cb39-300" aria-hidden="true" tabindex="-1"></a>    <span class="at">k41 =</span> <span class="fu">cut</span>(</span>
<span id="cb39-301"><a href="#cb39-301" aria-hidden="true" tabindex="-1"></a>      k41,</span>
<span id="cb39-302"><a href="#cb39-302" aria-hidden="true" tabindex="-1"></a>      <span class="at">breaks =</span> <span class="fu">as.vector</span>(fraktiilit),</span>
<span id="cb39-303"><a href="#cb39-303" aria-hidden="true" tabindex="-1"></a>      <span class="at">labels =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>),</span>
<span id="cb39-304"><a href="#cb39-304" aria-hidden="true" tabindex="-1"></a>      <span class="at">include.lowest =</span> <span class="cn">TRUE</span></span>
<span id="cb39-305"><a href="#cb39-305" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb39-306"><a href="#cb39-306" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb39-307"><a href="#cb39-307" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-308"><a href="#cb39-308" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb39-309"><a href="#cb39-309" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-310"><a href="#cb39-310" aria-hidden="true" tabindex="-1"></a>Fraktiilirajat ovat:</span>
<span id="cb39-311"><a href="#cb39-311" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-312"><a href="#cb39-312" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>0-25 %: <span class="in">`r fraktiilit[2]`</span> vuotta tai alle</span>
<span id="cb39-313"><a href="#cb39-313" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>25-50 %: <span class="in">`r fraktiilit[2]`</span> - <span class="in">`r fraktiilit[3]`</span> vuotta</span>
<span id="cb39-314"><a href="#cb39-314" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>50-75 %: <span class="in">`r fraktiilit[3]`</span> - <span class="in">`r fraktiilit[4]`</span> vuotta</span>
<span id="cb39-315"><a href="#cb39-315" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>75-100 %: <span class="in">`r fraktiilit[4]`</span> vuotta tai yli</span>
<span id="cb39-316"><a href="#cb39-316" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-317"><a href="#cb39-317" aria-hidden="true" tabindex="-1"></a><span class="fu">## Kohta 2: Harvinaisten ilmiöiden anonymisointi {#sec-anonymisointi-kohta2}</span></span>
<span id="cb39-318"><a href="#cb39-318" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-321"><a href="#cb39-321" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb39-322"><a href="#cb39-322" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: anon-04-harvinaisetilmiot</span></span>
<span id="cb39-323"><a href="#cb39-323" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Harvinaisten ilmiöiden k-tarkastus"</span></span>
<span id="cb39-324"><a href="#cb39-324" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-325"><a href="#cb39-325" aria-hidden="true" tabindex="-1"></a><span class="co"># Muuttujaa voi käyttää nyt ja myöhemmin looppaamiseen</span></span>
<span id="cb39-326"><a href="#cb39-326" aria-hidden="true" tabindex="-1"></a>muuttujat <span class="ot">&lt;-</span> rlang<span class="sc">::</span><span class="fu">exprs</span>(</span>
<span id="cb39-327"><a href="#cb39-327" aria-hidden="true" tabindex="-1"></a>  k3_1, k3_2, k3_3, k3_4, k3_5, k3_6, k3_7,</span>
<span id="cb39-328"><a href="#cb39-328" aria-hidden="true" tabindex="-1"></a>  k4_1, k4_2, k4_3, k4_4, k4_5, k4_6, k4_7,</span>
<span id="cb39-329"><a href="#cb39-329" aria-hidden="true" tabindex="-1"></a>  k12_1, k12_2, k12_3, k12_4, k12_5, k12_6, k12_7,</span>
<span id="cb39-330"><a href="#cb39-330" aria-hidden="true" tabindex="-1"></a>  k13_1, k13_2, k13_3, k13_4, k13_5, k13_6, k13_7,</span>
<span id="cb39-331"><a href="#cb39-331" aria-hidden="true" tabindex="-1"></a>  k5_3_1, k5_3_2,</span>
<span id="cb39-332"><a href="#cb39-332" aria-hidden="true" tabindex="-1"></a>  k7_10_1, k7_10_2,</span>
<span id="cb39-333"><a href="#cb39-333" aria-hidden="true" tabindex="-1"></a>  k8_11_1, k8_11_2,</span>
<span id="cb39-334"><a href="#cb39-334" aria-hidden="true" tabindex="-1"></a>  k9_5_1, k9_5_2, k9_10_1, k9_10_2,</span>
<span id="cb39-335"><a href="#cb39-335" aria-hidden="true" tabindex="-1"></a>  k10_2_1, k10_2_2, k10_10_1, k10_10_2, k10_11_1, k10_11_2,</span>
<span id="cb39-336"><a href="#cb39-336" aria-hidden="true" tabindex="-1"></a>  k11_6_1, k11_6_2,</span>
<span id="cb39-337"><a href="#cb39-337" aria-hidden="true" tabindex="-1"></a>  k14_3_1, k14_3_2,</span>
<span id="cb39-338"><a href="#cb39-338" aria-hidden="true" tabindex="-1"></a>  k16_10_1, k16_10_2,</span>
<span id="cb39-339"><a href="#cb39-339" aria-hidden="true" tabindex="-1"></a>  k17_11_1, k17_11_2,</span>
<span id="cb39-340"><a href="#cb39-340" aria-hidden="true" tabindex="-1"></a>  k18_5_1, k18_5_2, k18_10_1, k18_10_2,</span>
<span id="cb39-341"><a href="#cb39-341" aria-hidden="true" tabindex="-1"></a>  k19_2_1, k19_2_2, k19_10_1, k19_10_2, k19_11_1, k19_11_2,</span>
<span id="cb39-342"><a href="#cb39-342" aria-hidden="true" tabindex="-1"></a>  k22_1_1, k22_2_1, k22_3_1,</span>
<span id="cb39-343"><a href="#cb39-343" aria-hidden="true" tabindex="-1"></a>  k23_1, k23_2, k23_3, k23_4, k23_5, k23_6, k23_7, k23_8, k23_9, k23_10, k23_11</span>
<span id="cb39-344"><a href="#cb39-344" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb39-345"><a href="#cb39-345" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-346"><a href="#cb39-346" aria-hidden="true" tabindex="-1"></a><span class="co"># HUOM: Listaus sisältää muuttujaryhmät k3_1:k4_7, k12_1:k13_7, k22_1_1:k22_3_1 ja k23_1:k23_11. Näitä ei anonymisointisuunnitelman mukaisesti kuitenkaan tarkisteta.</span></span>
<span id="cb39-347"><a href="#cb39-347" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-348"><a href="#cb39-348" aria-hidden="true" tabindex="-1"></a>tulokset_kohta2 <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb39-349"><a href="#cb39-349" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> muuttujat) {</span>
<span id="cb39-350"><a href="#cb39-350" aria-hidden="true" tabindex="-1"></a>  tulokset_kohta2[[rlang<span class="sc">::</span><span class="fu">as_string</span>(i)]] <span class="ot">&lt;-</span> <span class="fu">k_anonymity</span>(data, <span class="at">limit =</span> <span class="dv">5</span>, i)</span>
<span id="cb39-351"><a href="#cb39-351" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb39-352"><a href="#cb39-352" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-353"><a href="#cb39-353" aria-hidden="true" tabindex="-1"></a><span class="co"># Poistetaan väliaikainen muuttuja siisteyden vuoksi</span></span>
<span id="cb39-354"><a href="#cb39-354" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(i)</span>
<span id="cb39-355"><a href="#cb39-355" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-356"><a href="#cb39-356" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb39-357"><a href="#cb39-357" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-358"><a href="#cb39-358" aria-hidden="true" tabindex="-1"></a>Tarkistettavista muuttujista seuraavilla esiintyi ongelmia:</span>
<span id="cb39-359"><a href="#cb39-359" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-360"><a href="#cb39-360" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`k7_10_1`</span> (aseella tai voimankäyttövälineellä uhkaaminen, organisaation sisäinen, itse koettu): Vain neljä vastaajaa ovat kokeneet</span>
<span id="cb39-361"><a href="#cb39-361" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`k8_11_2`</span> (voimankäyttövälineellä tai aseella vahingoittaminen, organisaation sisäinen, havaittu): Vain yksi vastaaja on havainnut</span>
<span id="cb39-362"><a href="#cb39-362" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`k9_5_1`</span> (pakotettu seksuaalinen teko tai raiskaus, tai näiden yritys, organisaation sisäinen, itse koettu): Vain kolme vastaajaa ovat kokeneet</span>
<span id="cb39-363"><a href="#cb39-363" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`k18_5_1`</span> (pakotettu seksuaalinen teko tai raiskaus, tai näiden yritys, organisaation ulkopuolinen, itse koettu): Vain kaksi vastaajaa ovat kokeneet</span>
<span id="cb39-364"><a href="#cb39-364" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`k18_5_2`</span> (pakotettu seksuaalinen teko tai raiskaus, tai näiden yritys, organisaation ulkopuolinen, havaittu): Vain kaksi vastaajaa ovat havainneet</span>
<span id="cb39-365"><a href="#cb39-365" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-366"><a href="#cb39-366" aria-hidden="true" tabindex="-1"></a>Poistimme nämä muuttujat datatiedostosta kokonaan.</span>
<span id="cb39-367"><a href="#cb39-367" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-370"><a href="#cb39-370" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb39-371"><a href="#cb39-371" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: anon-05-muutokset</span></span>
<span id="cb39-372"><a href="#cb39-372" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Muuttujien poisto"</span></span>
<span id="cb39-373"><a href="#cb39-373" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-374"><a href="#cb39-374" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">|&gt;</span></span>
<span id="cb39-375"><a href="#cb39-375" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">!</span><span class="fu">all_of</span>(<span class="fu">c</span>(<span class="st">"k7_10_1"</span>, <span class="st">"k8_11_2"</span>, <span class="st">"k9_5_1"</span>, <span class="st">"k18_5_1"</span>, <span class="st">"k18_5_2"</span>)))</span>
<span id="cb39-376"><a href="#cb39-376" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-377"><a href="#cb39-377" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb39-378"><a href="#cb39-378" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-379"><a href="#cb39-379" aria-hidden="true" tabindex="-1"></a><span class="fu">## Kohta 3: Taustamuuttujien k-anonymisointi toisiaan vastaan {#sec-anonymisointi-kohta3}</span></span>
<span id="cb39-380"><a href="#cb39-380" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-381"><a href="#cb39-381" aria-hidden="true" tabindex="-1"></a>Tarkistimme taustamuuttujien 4-anonymiteetin ristiintaulukoimalla yllä mainitut muuttujayhdistelmät yksitellen ja viemällä tulokset Excel-taulukkoon. Taulukossa kokeilimme erilaisia kategoriayhdistämisiä tarkistaaksemme, millaisia vaikutuksia anonymiteetin täyttymiseen niillä olisi.</span>
<span id="cb39-382"><a href="#cb39-382" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-385"><a href="#cb39-385" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb39-386"><a href="#cb39-386" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: anon-06-taustamuuttujat-k_anon-2</span></span>
<span id="cb39-387"><a href="#cb39-387" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Taustamuuttujien k-tarkastus toisiaan vastaan"</span></span>
<span id="cb39-388"><a href="#cb39-388" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-389"><a href="#cb39-389" aria-hidden="true" tabindex="-1"></a><span class="fu">k_anonymity</span>(data, <span class="at">limit =</span> <span class="dv">5</span>, k2, Organisaatioasema, k32) <span class="sc">|&gt;</span> <span class="fu">filter</span>(Freq <span class="sc">!=</span> <span class="dv">0</span>)</span>
<span id="cb39-390"><a href="#cb39-390" aria-hidden="true" tabindex="-1"></a><span class="fu">k_anonymity</span>(data, <span class="at">limit =</span> <span class="dv">5</span>, k2, Organisaatioasema, k33) <span class="sc">|&gt;</span> <span class="fu">filter</span>(Freq <span class="sc">!=</span> <span class="dv">0</span>)</span>
<span id="cb39-391"><a href="#cb39-391" aria-hidden="true" tabindex="-1"></a><span class="fu">k_anonymity</span>(data, <span class="at">limit =</span> <span class="dv">5</span>, k2, Organisaatioasema, k34) <span class="sc">|&gt;</span> <span class="fu">filter</span>(Freq <span class="sc">!=</span> <span class="dv">0</span>)</span>
<span id="cb39-392"><a href="#cb39-392" aria-hidden="true" tabindex="-1"></a><span class="fu">k_anonymity</span>(data, <span class="at">limit =</span> <span class="dv">5</span>, k2, Organisaatioasema, k35) <span class="sc">|&gt;</span> <span class="fu">filter</span>(Freq <span class="sc">!=</span> <span class="dv">0</span>)</span>
<span id="cb39-393"><a href="#cb39-393" aria-hidden="true" tabindex="-1"></a><span class="fu">k_anonymity</span>(data, <span class="at">limit =</span> <span class="dv">5</span>, k2, Organisaatioasema, k37) <span class="sc">|&gt;</span> <span class="fu">filter</span>(Freq <span class="sc">!=</span> <span class="dv">0</span>)</span>
<span id="cb39-394"><a href="#cb39-394" aria-hidden="true" tabindex="-1"></a><span class="fu">k_anonymity</span>(data, <span class="at">limit =</span> <span class="dv">5</span>, k2, Organisaatioasema, k41) <span class="sc">|&gt;</span> <span class="fu">filter</span>(Freq <span class="sc">!=</span> <span class="dv">0</span>)</span>
<span id="cb39-395"><a href="#cb39-395" aria-hidden="true" tabindex="-1"></a><span class="fu">k_anonymity</span>(data, <span class="at">limit =</span> <span class="dv">5</span>, k2, Organisaatioasema, k31) <span class="sc">|&gt;</span> <span class="fu">filter</span>(Freq <span class="sc">!=</span> <span class="dv">0</span>)</span>
<span id="cb39-396"><a href="#cb39-396" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-397"><a href="#cb39-397" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb39-398"><a href="#cb39-398" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-399"><a href="#cb39-399" aria-hidden="true" tabindex="-1"></a>Anonymiteettiä tarkastellessa emme ottaneet huomioon arvoa <span class="in">`-1`</span>. Vastaaja on saanut tämän arvon, jos hänelle ei olla näytetty kysymystä; arvo määräytyy täydellisesti organisaatiokuuluvuudesta, jolloin siitä ei voida päätellä mitään uniikkia tietoa.</span>
<span id="cb39-400"><a href="#cb39-400" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-401"><a href="#cb39-401" aria-hidden="true" tabindex="-1"></a>Sopimuspalokuntien ja palokuntayhdistysten työrytmimuuttujien kohdalla muutoksia ei tarvittu tehdä ollenkaan, sillä 4-anonymiteetin kriteerit täyttyivät valmiiksi.</span>
<span id="cb39-402"><a href="#cb39-402" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-403"><a href="#cb39-403" aria-hidden="true" tabindex="-1"></a>Sukupuolen osalta totesimme, että arvoa <span class="in">`3`</span> (muunsukupuolinen tai ei halua vastata) ei tarvita anonymisoida enempää, sillä arvosta ei enää voi päätellä, onko vastaajan sukupuoli muu kuin mies tai nainen, vai onko hän pidättäytynyt antamasta sukupuoltaan. Arvo ei siten sisällä pääteltävissä olevaa henkilötietoa.</span>
<span id="cb39-404"><a href="#cb39-404" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-405"><a href="#cb39-405" aria-hidden="true" tabindex="-1"></a>Pelastuslaitosten ja ensihoidon työrytmimuuttujan (<span class="in">`k32`</span>) osalta tunnistimme ongelmaksi johdon ja hallinnollisen henkilöstön 12-tuntisten päivien vastaajat.</span>
<span id="cb39-406"><a href="#cb39-406" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-407"><a href="#cb39-407" aria-hidden="true" tabindex="-1"></a>Järjestöjen ja koulutusorganisaatioiden työrytmimuuttujan (<span class="in">`k37`</span>) osalta tunnistimme yhden ongelman: hallinnollisen ja opetushenkilöstön työ- tai virkavapaalla olevat vastaajat.</span>
<span id="cb39-408"><a href="#cb39-408" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-409"><a href="#cb39-409" aria-hidden="true" tabindex="-1"></a>Työuran pituuden (<span class="in">`k41`</span>) tarkastelussa tunnistimme useita ongelmia. Useimmat ongelmat eivät korjaannu organisaatioaseman tai organisaatiokuuluvuuden yhdistämisellä. Vähentämällä fraktiileja neljään korjasimme useimmat ongelmat.</span>
<span id="cb39-410"><a href="#cb39-410" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-411"><a href="#cb39-411" aria-hidden="true" tabindex="-1"></a>Korjataksemme useimmat ongelmat, päätimme tehdä seuraavat muutokset:</span>
<span id="cb39-412"><a href="#cb39-412" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-413"><a href="#cb39-413" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Organisaatiokuuluvuudessa (<span class="in">`k2`</span>) yhdistimme järjestöt ja koulutusorganisaatiot (<span class="in">`3`</span> ja <span class="in">`4`</span>) arvoksi <span class="in">`3`</span>. Täten arvoa <span class="in">`4`</span> ei enää ole, ja muuttujalla on kolme kategoriaa:</span>
<span id="cb39-414"><a href="#cb39-414" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="in">`1`</span> (Pelastuslaitokset ja ensihoito)</span>
<span id="cb39-415"><a href="#cb39-415" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="in">`2`</span> (Sopimuspalokunnat ja palokuntayhdistykset)</span>
<span id="cb39-416"><a href="#cb39-416" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="in">`3`</span> (Pelastusalan valtakunnalliset järjestöt, pelastusliitot sekä koulutusorganisaatiot).</span>
<span id="cb39-417"><a href="#cb39-417" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Organisaatioasemassa (<span class="in">`Organisaatioasema`</span>) yhdistimme johto- ja esihenkilötason, asiantuntijatason sekä hallinnollisen ja tukipalveluhenkilöstötason (arvot <span class="in">`1`</span>, <span class="in">`3`</span> ja <span class="in">`4`</span>) arvoksi <span class="in">`1`</span>. Muutimme arvojen numerointia sopivammaksi, jolloin muuttujalla on neljä kategoriaa:</span>
<span id="cb39-418"><a href="#cb39-418" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="in">`1`</span> (Johto, asiantuntijat ja hallinto)</span>
<span id="cb39-419"><a href="#cb39-419" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="in">`2`</span> (Suorittava henkilöstö)</span>
<span id="cb39-420"><a href="#cb39-420" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="in">`3`</span> (Opetushenkilöstö)</span>
<span id="cb39-421"><a href="#cb39-421" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="in">`4`</span> (Opiskelija)</span>
<span id="cb39-422"><a href="#cb39-422" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Vähensimme työuran pituuden (<span class="in">`k41`</span>) fraktiileja neljäksi. Muutos jouduttiin tekemään takautuvasti tässä dokumentissa, sillä aikaisempi data tuhottiin ensimmäisessä fraktiilimuutoksessa. Dokumentissa on huomio asiasta fraktiilikoodauksen kohdassa.</span>
<span id="cb39-423"><a href="#cb39-423" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-424"><a href="#cb39-424" aria-hidden="true" tabindex="-1"></a>Muutosehdotusten lisäksi jouduimme muuttamaan vastausarvoja neljälle vastaajalle, jotta heidän anonymiteettinsa voidaan taata:</span>
<span id="cb39-425"><a href="#cb39-425" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-426"><a href="#cb39-426" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Yksi asiantuntija sopimuspalokunnista tai palokuntayhdistyksistä, joka työskentelee virasto- tai toimistotyöajalla muutettiin pelastuslaitoksen tai ensihoidon henkilöstöksi. Vaikka taustamuuttujista ei yksittäin luultavasti voitaisi tunnistaa vastaajaa, hänen muut vastauksensa voivat riittää yksilöimään hänet. Vastaanottavassa ryhmässä on yli 4 vastaajaa jokaisessa taustamuuttujatarkastuksessa, joten tunnistettavuuden riski laskee huomattavasti.</span>
<span id="cb39-427"><a href="#cb39-427" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Kolme naispuolista opiskelijaa järjestöistä tai koulutusorganisaatioista muutettiin satunnaisesti joko miespuolisiksi tai muu-ryhmään. Kuten yllä, näiden vastaajien anonymiteetti olisi voinut rikkoutua muiden vastausten tarkistuksessa. Vastaanottavissa ryhmissä on yli 4 vastajaa jokaisessa taustamuuttujatarkastuksessa, joten tunnistettavuuden riski laskee niin ikään näille vastaajille huomattavasti.</span>
<span id="cb39-428"><a href="#cb39-428" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-429"><a href="#cb39-429" aria-hidden="true" tabindex="-1"></a>Emme näe, että kyselytutkimuksen myöhemmät tulokset vaikuttuvat suuresti näiden vastaajien datamuunnoksista. Anonymiteetin kannalta hyöty on tutkimuksellista haittaa nähden suurempi.</span>
<span id="cb39-430"><a href="#cb39-430" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-431"><a href="#cb39-431" aria-hidden="true" tabindex="-1"></a>Tilastoteknisesti teimme neljän vastaajan datamuunnokset ensin ja kategorioiden yhdistämiset jälkeen.</span>
<span id="cb39-432"><a href="#cb39-432" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-435"><a href="#cb39-435" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb39-436"><a href="#cb39-436" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: anon-07-muutokset</span></span>
<span id="cb39-437"><a href="#cb39-437" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Tarkistuksen muutosten suorittaminen"</span></span>
<span id="cb39-438"><a href="#cb39-438" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-439"><a href="#cb39-439" aria-hidden="true" tabindex="-1"></a><span class="co"># Asiantuntija sopimuspalokunnista tai palokuntayhdistyksistä, joka työskentelee virasto- tai toimistotyöajalla muutetaan pelastuslaitoksen tai ensihoidon henkilöstöksi</span></span>
<span id="cb39-440"><a href="#cb39-440" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>k2 <span class="ot">&lt;-</span> <span class="fu">replace</span>(</span>
<span id="cb39-441"><a href="#cb39-441" aria-hidden="true" tabindex="-1"></a>  data<span class="sc">$</span>k2,</span>
<span id="cb39-442"><a href="#cb39-442" aria-hidden="true" tabindex="-1"></a>  data<span class="sc">$</span>ID <span class="sc">==</span> <span class="dv">260</span>,</span>
<span id="cb39-443"><a href="#cb39-443" aria-hidden="true" tabindex="-1"></a>  <span class="dv">1</span></span>
<span id="cb39-444"><a href="#cb39-444" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb39-445"><a href="#cb39-445" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-446"><a href="#cb39-446" aria-hidden="true" tabindex="-1"></a><span class="co"># Naispuoliset opiskelijat järjestöistä tai koulutusorganisaatioista muutetaan satunnaisesti miespuolisiksi tai muu-ryhmään</span></span>
<span id="cb39-447"><a href="#cb39-447" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>k31 <span class="ot">&lt;-</span> <span class="fu">replace</span>(</span>
<span id="cb39-448"><a href="#cb39-448" aria-hidden="true" tabindex="-1"></a>  data<span class="sc">$</span>k31,</span>
<span id="cb39-449"><a href="#cb39-449" aria-hidden="true" tabindex="-1"></a>  data<span class="sc">$</span>ID <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">181</span>, <span class="dv">182</span>, <span class="dv">187</span>),</span>
<span id="cb39-450"><a href="#cb39-450" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sample</span>(<span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">3</span>), <span class="dv">1</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span>
<span id="cb39-451"><a href="#cb39-451" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb39-452"><a href="#cb39-452" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-453"><a href="#cb39-453" aria-hidden="true" tabindex="-1"></a><span class="co"># Organisaatiokuuluvuuden muutos</span></span>
<span id="cb39-454"><a href="#cb39-454" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">|&gt;</span></span>
<span id="cb39-455"><a href="#cb39-455" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb39-456"><a href="#cb39-456" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(</span>
<span id="cb39-457"><a href="#cb39-457" aria-hidden="true" tabindex="-1"></a>      k2,</span>
<span id="cb39-458"><a href="#cb39-458" aria-hidden="true" tabindex="-1"></a>      <span class="sc">~</span> <span class="fu">case_match</span>(</span>
<span id="cb39-459"><a href="#cb39-459" aria-hidden="true" tabindex="-1"></a>        .x,</span>
<span id="cb39-460"><a href="#cb39-460" aria-hidden="true" tabindex="-1"></a>        <span class="dv">1</span> <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb39-461"><a href="#cb39-461" aria-hidden="true" tabindex="-1"></a>        <span class="dv">2</span> <span class="sc">~</span> <span class="dv">2</span>,</span>
<span id="cb39-462"><a href="#cb39-462" aria-hidden="true" tabindex="-1"></a>        <span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">4</span>) <span class="sc">~</span> <span class="dv">3</span></span>
<span id="cb39-463"><a href="#cb39-463" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb39-464"><a href="#cb39-464" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb39-465"><a href="#cb39-465" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb39-466"><a href="#cb39-466" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-467"><a href="#cb39-467" aria-hidden="true" tabindex="-1"></a><span class="co"># Organisaatioaseman muutos</span></span>
<span id="cb39-468"><a href="#cb39-468" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">|&gt;</span></span>
<span id="cb39-469"><a href="#cb39-469" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb39-470"><a href="#cb39-470" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(</span>
<span id="cb39-471"><a href="#cb39-471" aria-hidden="true" tabindex="-1"></a>      Organisaatioasema,</span>
<span id="cb39-472"><a href="#cb39-472" aria-hidden="true" tabindex="-1"></a>      <span class="sc">~</span> <span class="fu">case_match</span>(</span>
<span id="cb39-473"><a href="#cb39-473" aria-hidden="true" tabindex="-1"></a>        .x,</span>
<span id="cb39-474"><a href="#cb39-474" aria-hidden="true" tabindex="-1"></a>        <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>) <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb39-475"><a href="#cb39-475" aria-hidden="true" tabindex="-1"></a>        <span class="dv">2</span> <span class="sc">~</span> <span class="dv">2</span>,</span>
<span id="cb39-476"><a href="#cb39-476" aria-hidden="true" tabindex="-1"></a>        <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">5</span>) <span class="sc">~</span> <span class="dv">3</span>,</span>
<span id="cb39-477"><a href="#cb39-477" aria-hidden="true" tabindex="-1"></a>        <span class="dv">6</span> <span class="sc">~</span> <span class="dv">4</span></span>
<span id="cb39-478"><a href="#cb39-478" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb39-479"><a href="#cb39-479" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb39-480"><a href="#cb39-480" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb39-481"><a href="#cb39-481" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-482"><a href="#cb39-482" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb39-483"><a href="#cb39-483" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-484"><a href="#cb39-484" aria-hidden="true" tabindex="-1"></a><span class="fu">## Kooste muutoksista {#sec-anonymisointi-kooste}</span></span>
<span id="cb39-485"><a href="#cb39-485" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-486"><a href="#cb39-486" aria-hidden="true" tabindex="-1"></a>Teimme seuraavat muutokset datatiedostolle:</span>
<span id="cb39-487"><a href="#cb39-487" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-488"><a href="#cb39-488" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Organisaatiokuuluvuus (<span class="in">`k2`</span>): Järjestöt (<span class="in">`3`</span>) ja koulutusorganisaatiot (<span class="in">`4`</span>) yhdistettiin yhdeksi luokaksi. Uudet koodit:</span>
<span id="cb39-489"><a href="#cb39-489" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="in">`1`</span> (Pelastuslaitokset ja ensihoito)</span>
<span id="cb39-490"><a href="#cb39-490" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="in">`2`</span> (Sopimuspalokunnat ja palokuntayhdistykset)</span>
<span id="cb39-491"><a href="#cb39-491" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="in">`3`</span> (Järjestöt, pelastusliitot ja koulut)</span>
<span id="cb39-492"><a href="#cb39-492" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Poistimme seuraavat muuttujat:</span>
<span id="cb39-493"><a href="#cb39-493" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="in">`k7_10_1`</span> (aseella tai voimankäyttövälineellä uhkaaminen, organisaation sisäinen, itse koettu)</span>
<span id="cb39-494"><a href="#cb39-494" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="in">`k8_11_2`</span> (voimankäyttövälineellä tai aseella vahingoittaminen, organisaation sisäinen, havaittu)</span>
<span id="cb39-495"><a href="#cb39-495" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="in">`k9_5_1`</span> (pakotettu seksuaalinen teko tai raiskaus, tai näiden yritys, organisaation sisäinen, itse koettu)</span>
<span id="cb39-496"><a href="#cb39-496" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="in">`k18_5_1`</span> (pakotettu seksuaalinen teko tai raiskaus, tai näiden yritys, organisaation ulkopuolinen, itse koettu)</span>
<span id="cb39-497"><a href="#cb39-497" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="in">`k18_5_2`</span> (pakotettu seksuaalinen teko tai raiskaus, tai näiden yritys, organisaation ulkopuolinen, havaittu)</span>
<span id="cb39-498"><a href="#cb39-498" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Sukupuoli (<span class="in">`k31`</span>): Muunsukupuoliset (<span class="in">`3`</span>) ja vastaamisesta kieltäytyneet (<span class="in">`4`</span>) yhdistettiin yhdeksi luokaksi. Uudet koodit:</span>
<span id="cb39-499"><a href="#cb39-499" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="in">`1`</span> (Nainen)</span>
<span id="cb39-500"><a href="#cb39-500" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="in">`2`</span> (Mies)</span>
<span id="cb39-501"><a href="#cb39-501" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="in">`3`</span> (Muu/EHV)</span>
<span id="cb39-502"><a href="#cb39-502" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Työrytmi, pelastuslaitokset tai ensihoito (<span class="in">`k32`</span>): Virasto- tai toimistotyöaika (<span class="in">`3`</span>) ja työ- tai virkavapaalla (<span class="in">`4`</span>) yhdistettiin yhdeksi luokaksi. Uudet koodit:</span>
<span id="cb39-503"><a href="#cb39-503" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="in">`1`</span> (24h työvuorot)</span>
<span id="cb39-504"><a href="#cb39-504" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="in">`2`</span> (12h työvuorot)</span>
<span id="cb39-505"><a href="#cb39-505" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="in">`3`</span> (Muu työaika tai vapaalla)</span>
<span id="cb39-506"><a href="#cb39-506" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="in">`-1`</span> (ei esitetty)</span>
<span id="cb39-507"><a href="#cb39-507" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Viikottainen työmääräarvio, sopimuspalokunnat ja palokuntayhdistykset (<span class="in">`k33`</span>): 11-20 tuntia (<span class="in">`4`</span>) ja yli 21 tuntia (<span class="in">`5`</span>) yhdistettiin yhdeksi luokaksi. Uudet koodit:</span>
<span id="cb39-508"><a href="#cb39-508" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="in">`1`</span> (Alle 2 tuntia viikossa)</span>
<span id="cb39-509"><a href="#cb39-509" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="in">`2`</span> (2-5 tuntia viikossa)</span>
<span id="cb39-510"><a href="#cb39-510" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="in">`3`</span> (6-10 tuntia viikossa)</span>
<span id="cb39-511"><a href="#cb39-511" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="in">`4`</span> (Yli 10 tuntia viikossa)</span>
<span id="cb39-512"><a href="#cb39-512" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="in">`-1`</span> (ei esitetty)</span>
<span id="cb39-513"><a href="#cb39-513" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Varallaolon kuukausittainen työmääräarvio, sopimuspalokunnat ja palokuntayhdistykset (<span class="in">`k35`</span>): 121-200 tuntia (<span class="in">`4`</span>) ja yli 200 tuntia (<span class="in">`5`</span>) yhdistettiin yhdeksi luokaksi. Uudet koodit:</span>
<span id="cb39-514"><a href="#cb39-514" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="in">`1`</span> (En ollenkaan)</span>
<span id="cb39-515"><a href="#cb39-515" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="in">`2`</span> (1-60 tuntia)</span>
<span id="cb39-516"><a href="#cb39-516" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="in">`3`</span> (61-120 tuntia)</span>
<span id="cb39-517"><a href="#cb39-517" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="in">`4`</span> (Yli 120 tuntia)</span>
<span id="cb39-518"><a href="#cb39-518" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="in">`-1`</span> (ei esitetty)</span>
<span id="cb39-519"><a href="#cb39-519" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Organisaatioasema (<span class="in">`Organisaatioasema`</span>): Johto- tai esihenkilötaso (<span class="in">`1`</span>) ja hallinnollinen tai tukipalveluhenkilöstö (<span class="in">`4`</span>) yhdistettiin yhdeksi luokaksi, ja asiantuntijat (<span class="in">`3`</span>) ja opetushenkilöstö (<span class="in">`5`</span>) yhdistettiin yhdeksi luokaksi. Uudet koodit:</span>
<span id="cb39-520"><a href="#cb39-520" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="in">`1`</span> (Johto- tai hallintotaso)</span>
<span id="cb39-521"><a href="#cb39-521" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="in">`2`</span> (Suorittava henkilöstö)</span>
<span id="cb39-522"><a href="#cb39-522" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="in">`3`</span> (Asiantuntijat ja opettajat)</span>
<span id="cb39-523"><a href="#cb39-523" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="in">`4`</span> (Opiskelijat)</span>
<span id="cb39-524"><a href="#cb39-524" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Työuran pituus (<span class="in">`k41`</span>) luokiteltiin neljään fraktiiliin. Uudet koodit:</span>
<span id="cb39-525"><a href="#cb39-525" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="in">`1`</span> (<span class="in">`r fraktiilit[2]`</span> vuotta tai alle)</span>
<span id="cb39-526"><a href="#cb39-526" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="in">`2`</span> (<span class="in">`r fraktiilit[2]`</span> - <span class="in">`r fraktiilit[3]`</span> vuotta)</span>
<span id="cb39-527"><a href="#cb39-527" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="in">`3`</span> (<span class="in">`r fraktiilit[3]`</span> - <span class="in">`r fraktiilit[4]`</span> vuotta)</span>
<span id="cb39-528"><a href="#cb39-528" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="in">`4`</span> (<span class="in">`r fraktiilit[4]`</span> vuotta tai yli)</span>
<span id="cb39-529"><a href="#cb39-529" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Yhden vastaajan organisaatiokuuluvuus (<span class="in">`2`</span>) muutettiin suojataksemme vastaajan anonymiteettiä.</span>
<span id="cb39-530"><a href="#cb39-530" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Kolmen vastaajan sukupuolet (<span class="in">`k31`</span>) muutettiin satunnaisesti suojataksemme vastaajien anonymiteettiä.</span>
<span id="cb39-531"><a href="#cb39-531" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-532"><a href="#cb39-532" aria-hidden="true" tabindex="-1"></a><span class="fu">## Datan tallennus {#sec-anonymisointi-datantallennus}</span></span>
<span id="cb39-533"><a href="#cb39-533" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-534"><a href="#cb39-534" aria-hidden="true" tabindex="-1"></a>Anonymisoinnin jälkeen tallensimme lopullisen datatiedoston <span class="in">`csv`</span>-muotoon.</span>
<span id="cb39-535"><a href="#cb39-535" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-538"><a href="#cb39-538" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb39-539"><a href="#cb39-539" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: anon-10-tallennus</span></span>
<span id="cb39-540"><a href="#cb39-540" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Datan tallennus"</span></span>
<span id="cb39-541"><a href="#cb39-541" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-542"><a href="#cb39-542" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv2</span>(data, <span class="at">file =</span> <span class="st">"output/anonymisoitudata.csv"</span>, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span>
<span id="cb39-543"><a href="#cb39-543" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-544"><a href="#cb39-544" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
</code><button title="Kopioi leikepöydälle" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->



</body></html>