{
  "hash": "9612cd1c30200c47d71fbc900ae674cb",
  "result": {
    "markdown": "# Puhdistaminen {#sec-puhdistaminen}\n\n\n---\neval: true\n---\n\n\nTässä osiossa puhdistamme datatiedostosta joitain virheellisiä kyselyvastauksia sekä tarkistamme puuttuvien vastausten piirteet.\n\n## Esivalmistelu {#sec-puhdistaminen-esivalmistelu}\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(mice)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ndata <- read.csv2(\"output/koodattudata.csv\", tryLogical = FALSE)\n```\n:::\n\n\n## Suostumuksensa kieltäneiden poistaminen {#sec-puhdistaminen-suostumuskiellot}\n\nEnnen poistamista datatiedostossa oli 1048 vastaajaa. Webropolissa tapahtuneen virheen takia kuitenkin osa vastaajista onnistuivat palauttamaan kyselylomakkeen, vaikka he eivät antaneet suostumusta tietojen käsittelyyn. Näillä vastaajilla ei ole muuta tietoa, kuin `k1 == 2`, ja heidät pitää poistaa datatiedostosta.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Otetaan mukaan vain suostumuksensa antaneet vastaajat\ndata <- data |>\n  dplyr::filter(k1 == 1)\n```\n:::\n\n\nPoistamisen jälkeen datatiedostossa oli 1025 vastaajaa.\n\n## Puuttuvien vastausten piirreanalyysi {#sec-puhdistaminen-puuttuvat}\n\nTarkistimme puuttuvien vastausten piirteet `mice`-paketin `md.pattern`-toiminnolla. Piirteet luokitellaan eri yhdistelmiin olemassaolevista ja puuttuvista vastauksista, ja niiden esiintymismäärät lasketaan yhteen. Tarkastimme näistä eniten esiintyvät puuttuvat muuttujayhdistelmät.\n\n\n::: {.cell}\n\n```{.r .cell-code}\npuuttuvat <- data |>\n  mice::md.pattern(plot = FALSE) |>\n  as_tibble(rownames = \"Määrä\")\npuuttuvat$Määrä <- as.numeric(puuttuvat$Määrä)\n```\n:::\n\n\nPuuttuvien vastausten uniikkeja muuttujayhdistelmiä on yhteensä 889 kappaletta.\n\nYleisimmällä puuttivien vastausten yhdistelmällä on 91 vastaajaa (yhdistelmä A). Tältä muuttujayhdistelmältä löytyy puuttuvia vastauksia kaikilta työuran muutossuunnitelmien muuttujilta. Toisin sanoen, nämä 91 vastaajaa eivät ole suunnitelleet mitään muutoksia toimintaan osallistumiseensa, mutta ovat vastanneet kaikkiin muihin kyselyn kysymyksiin.\n\nToiseksi yleisimmällä puuttuvien vastausten yhdistelmällä on 10 vastajaa (yhdistelmä B). Tältä muuttujayhdistelmältä löytyy puuttuvia vastauksia vain työuran muutossuunnitelmien muuttujilla vastausvaihtoehdoilla \"Olen toteuttamassa\" ja \"Olen jo tehnyt\". Toisin sanoen, nämä 10 vastaajaa ovat vastanneet kaikkiin muihin kysymyksiin, mutta eivät ole ilmaisseet olevansa toteuttamassa tai jo tehneensä mitään toimintaan osallistumisen muutoksia.\n\nMuut yhdistelmät tippuvat alle 10 vastaajan. Emme näe tarpeen käsitellä näitä muuttujayhdistelmiä, sillä määrät ovat jo alle promillen koko datatiedostosta.\n\n## Datan tallennus {#sec-puhdistaminen-tallennus}\n\nViimeiseksi data tallennettiin tilapäiseksi tiedostoksi anonymisointia varten. Tallennusta ei ole saatavilla verkkosivun lähdekoodista tietosuojan takia.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nwrite.csv2(data, file = \"output/puhdistettudata.csv\", row.names = FALSE)\n```\n:::\n",
    "supporting": [
      "puhdistaminen_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}